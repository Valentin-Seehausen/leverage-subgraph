{
  "abi": [
    {
      "inputs": [
        {
          "internalType": "contract ILiquidityPool",
          "name": "liquidityPool_",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "protocol_",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "chainlinkAggregator_",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "aggregator",
          "type": "address"
        }
      ],
      "name": "ChainlinkAggregatorSet",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "liquidityPool",
          "type": "address"
        }
      ],
      "name": "LiquidityPoolSet",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "trader",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "closePrice",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "closeDate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "int256",
          "name": "pnlShares",
          "type": "int256"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "isLong",
          "type": "bool"
        }
      ],
      "name": "PositionClosed",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "trader",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "collateral",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "shares",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "leverage",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "isLong",
          "type": "bool"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "entryPrice",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "liquidationPrice",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "takeProfitPrice",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "openDate",
          "type": "uint256"
        }
      ],
      "name": "PositionOpened",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "protocol",
          "type": "address"
        }
      ],
      "name": "ProtocolSet",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "protocol",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "protocolShare",
          "type": "uint256"
        }
      ],
      "name": "ProtocolShareTaken",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "chainlinkAggregator",
      "outputs": [
        {
          "internalType": "contract AggregatorV3Interface",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "name": "closePosition",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256[]",
          "name": "positionIds",
          "type": "uint256[]"
        }
      ],
      "name": "closePositions",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "liquidityPool",
      "outputs": [
        {
          "internalType": "contract ILiquidityPool",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "collateral",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "leverage",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "isLong",
          "type": "bool"
        }
      ],
      "name": "openPosition",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "positions",
      "outputs": [
        {
          "internalType": "address",
          "name": "trader",
          "type": "address"
        },
        {
          "internalType": "uint128",
          "name": "shares",
          "type": "uint128"
        },
        {
          "internalType": "uint32",
          "name": "leverage",
          "type": "uint32"
        },
        {
          "internalType": "bool",
          "name": "isLong",
          "type": "bool"
        },
        {
          "internalType": "uint256",
          "name": "entryPrice",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "protocol",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "aggregator",
          "type": "address"
        }
      ],
      "name": "setChainlinkAggregator",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "contract ILiquidityPool",
          "name": "_liquidityPool",
          "type": "address"
        }
      ],
      "name": "setLiquidityPool",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_protocol",
          "type": "address"
        }
      ],
      "name": "setProtocol",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": {
    "object": "0x6080604052606462000016620f424060016200015d565b62000022919062000189565b6000553480156200003257600080fd5b50604051620011c9380380620011c98339810160408190526200005591620001c5565b62000060836200007f565b6200006b82620000c9565b620000768162000113565b50505062000219565b600280546001600160a01b0319166001600160a01b0383169081179091556040517fe57f71636571365571c0eaeaeb54e1d9e0065804f056a57a2a29448524f7d18a90600090a250565b600380546001600160a01b0319166001600160a01b0383169081179091556040517f9269d63ac6e0360a152db45a73e3e9e471a002419dff28abc7b58efaa211a2ba90600090a250565b600580546001600160a01b0319166001600160a01b0383169081179091556040517fe961dda575ed805d146eaa4042ec32dc5f24ac9c6ea5bcee7647d4ae801f6fe790600090a250565b80820281158282048414176200018357634e487b7160e01b600052601160045260246000fd5b92915050565b600082620001a757634e487b7160e01b600052601260045260246000fd5b500490565b6001600160a01b0381168114620001c257600080fd5b50565b600080600060608486031215620001db57600080fd5b8351620001e881620001ac565b6020850151909350620001fb81620001ac565b60408501519092506200020e81620001ac565b809150509250925092565b610fa080620002296000396000f3fe608060405234801561001057600080fd5b506004361061009e5760003560e01c80638ce74426116100665780638ce744261461012157806399fbab8814610134578063a126d601146101d5578063aa93186d146101e8578063ef353917146101fb57600080fd5b806301877020146100a35780630a9d793d146100b85780631558c966146100cb5780635004d36c146100de578063665a11ca1461010e575b600080fd5b6100b66100b1366004610c3e565b61020e565b005b6100b66100c6366004610c3e565b610258565b6100b66100d9366004610c70565b6102a2565b6005546100f1906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b6002546100f1906001600160a01b031681565b6003546100f1906001600160a01b031681565b610190610142366004610ca9565b6004602052600090815260409020805460018201546002909201546001600160a01b03909116916001600160801b03811691600160801b820463ffffffff1691600160a01b900460ff169085565b604080516001600160a01b0390961686526001600160801b03909416602086015263ffffffff909216928401929092529015156060830152608082015260a001610105565b6100b66101e3366004610ca9565b610598565b6100b66101f6366004610cd8565b610612565b6100b6610209366004610c3e565b610653565b600280546001600160a01b0319166001600160a01b0383169081179091556040517fe57f71636571365571c0eaeaeb54e1d9e0065804f056a57a2a29448524f7d18a90600090a250565b600380546001600160a01b0319166001600160a01b0383169081179091556040517f9269d63ac6e0360a152db45a73e3e9e471a002419dff28abc7b58efaa211a2ba90600090a250565b6102b0620f42406005610dac565b82101580156102cc57506102c8620f42406064610dac565b8211155b6103305760405162461bcd60e51b815260206004820152602a60248201527f5472616465506169723a3a6f70656e506f736974696f6e3a20496e76616c6964604482015269103632bb32b930b3b29760b11b60648201526084015b60405180910390fd5b629896808310158015610348575064e8d4a510008311155b6103a95760405162461bcd60e51b815260206004820152602c60248201527f5472616465506169723a3a6f70656e506f736974696f6e3a20496e76616c696460448201526b1031b7b63630ba32b930b61760a11b6064820152608401610327565b60006103b361069d565b90506000806103c3838686610798565b60025460405163297576c360e21b8152336004820152602481018a905292945090925042916000916001600160a01b03169063a5d5db0c906044016020604051808303816000875af115801561041d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104419190610dc9565b60018054919250600061045383610de2565b90915550506040805160a081018252338082526001600160801b03808516602080850191825263ffffffff808e168688019081528d151560608801908152608088018e81526001805460009081526004909652948a9020985189546001600160a01b03919091166001600160a01b0319918216178a5595518986018054945193511515600160a01b0260ff60a01b1994909616600160801b029490971697169690961791909117161790915590516002909301929092559054915190917f664218bb5e99fd4ca867d8e92f8fdbeddc8aac8132245e8efecdae2576e3789e9161058691908c9086908d908d908d908d908d908d90988952602089019790975260408801959095526060870193909352901515608086015260a085015260c084015260e08301526101008201526101200190565b60405180910390a25050505050505050565b60006105a38261083f565b90508061060e5760405162461bcd60e51b815260206004820152603360248201527f5472616465506169723a3a636c6f7365506f736974696f6e3a20506f7369746960448201527237b71034b9903737ba1031b637b9b0b136329760691b6064820152608401610327565b5050565b60005b815181101561060e5761064082828151811061063357610633610dfb565b602002602001015161083f565b508061064b81610de2565b915050610615565b600580546001600160a01b0319166001600160a01b0383169081179091556040517fe961dda575ed805d146eaa4042ec32dc5f24ac9c6ea5bcee7647d4ae801f6fe790600090a250565b600080600560009054906101000a90046001600160a01b03166001600160a01b031663feaf968c6040518163ffffffff1660e01b815260040160a060405180830381865afa1580156106f3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107179190610e2b565b505050915050600081136107935760405162461bcd60e51b815260206004820152603f60248201527f5472616465506169723a3a5f67657443757272656e7450726963653a2046616960448201527f6c656420746f206665746368207468652063757272656e742070726963652e006064820152608401610327565b919050565b60008082156107ee57836107af620f424087610dac565b6107b99190610e7b565b6107c39086610e9d565b9150836107d3620f424087610dac565b6107dd9190610e7b565b6107e79086610eb0565b9050610837565b836107fc620f424087610dac565b6108069190610e7b565b6108109086610eb0565b915083610820620f424087610dac565b61082a9190610e7b565b6108349086610e9d565b90505b935093915050565b600081815260046020526040812080546001600160a01b03166108655750600092915050565b600061086f61069d565b60028301546001840154919250600091829182916108a59190600160801b810463ffffffff1690600160a01b900460ff16610798565b60018701549193509150600160a01b900460ff161561090c578084106108da5760018501546001600160801b03169250610949565b8184116108ff5760018501546108f8906001600160801b0316610ec3565b9250610949565b5060009695505050505050565b8084116109285760018501546001600160801b03169250610949565b8184106108ff576001850154610946906001600160801b0316610ec3565b92505b600083600f0b13156109f5576002805486546001600160a01b039182169263a9059cbb929091169061098090600f88900b90610ef2565b6040516001600160e01b031960e085901b1681526001600160a01b03909216600483015260248201526044016020604051808303816000875af11580156109cb573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109ef9190610f22565b50610b77565b600080546001870154620f424091610a15916001600160801b0316610dac565b610a1f9190610e7b565b60025460035460405163a9059cbb60e01b81526001600160a01b03918216600482015260248101849052929350169063a9059cbb906044016020604051808303816000875af1158015610a76573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a9a9190610f22565b506002805460018801546001600160a01b03909116916342966c68918491610acb916001600160801b031690610f3f565b6001600160801b0316610ade9190610e9d565b6040518263ffffffff1660e01b8152600401610afc91815260200190565b600060405180830381600087803b158015610b1657600080fd5b505af1158015610b2a573d6000803e3d6000fd5b5050600354604080516001600160a01b039092168252602082018590527f110f5f0187a3a1acba865eca199d48ecae4bfe8aaac55910fa3c0684a0abbd9a935001905060405180910390a1505b84546001860154604080518a8152602081018890524281830152600f87900b6060820152600160a01b90920460ff1615156080830152516001600160a01b03909216917f7f0e648fab91ce864339c747d7bcf7e42c0b796ff39ea0c668e810495f1278cc9160a0908290030190a2505050600093845250506004602052506040812080546001600160a01b0319168155600180820180546001600160a81b031916905560029091019190915590565b6001600160a01b0381168114610c3b57600080fd5b50565b600060208284031215610c5057600080fd5b8135610c5b81610c26565b9392505050565b8015158114610c3b57600080fd5b600080600060608486031215610c8557600080fd5b83359250602084013591506040840135610c9e81610c62565b809150509250925092565b600060208284031215610cbb57600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b60006020808385031215610ceb57600080fd5b823567ffffffffffffffff80821115610d0357600080fd5b818501915085601f830112610d1757600080fd5b813581811115610d2957610d29610cc2565b8060051b604051601f19603f83011681018181108582111715610d4e57610d4e610cc2565b604052918252848201925083810185019188831115610d6c57600080fd5b938501935b82851015610d8a57843584529385019392850192610d71565b98975050505050505050565b634e487b7160e01b600052601160045260246000fd5b8082028115828204841417610dc357610dc3610d96565b92915050565b600060208284031215610ddb57600080fd5b5051919050565b600060018201610df457610df4610d96565b5060010190565b634e487b7160e01b600052603260045260246000fd5b805169ffffffffffffffffffff8116811461079357600080fd5b600080600080600060a08688031215610e4357600080fd5b610e4c86610e11565b9450602086015193506040860151925060608601519150610e6f60808701610e11565b90509295509295909350565b600082610e9857634e487b7160e01b600052601260045260246000fd5b500490565b81810381811115610dc357610dc3610d96565b80820180821115610dc357610dc3610d96565b600081600f0b6f7fffffffffffffffffffffffffffffff198103610ee957610ee9610d96565b60000392915050565b80820260008212600160ff1b84141615610f0e57610f0e610d96565b8181058314821517610dc357610dc3610d96565b600060208284031215610f3457600080fd5b8151610c5b81610c62565b6001600160801b03818116838216028082169190828114610f6257610f62610d96565b50509291505056fea264697066735822122054ff3e68eed8cab2e31a759cad0fc3a8c9c3ba2165a578e2b061d66367df01dd64736f6c63430008130033",
    "sourceMap": "269:6186:40:-:0;;;594:3;578:13;345:3;590:1;578:13;:::i;:::-;:19;;;;:::i;:::-;564:33;;1080:227;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1182:32;1199:14;1182:16;:32::i;:::-;1224:22;1236:9;1224:11;:22::i;:::-;1256:44;1279:20;1256:22;:44::i;:::-;1080:227;;;269:6186;;4813:167;4887:13;:30;;-1:-1:-1;;;;;;4887:30:40;-1:-1:-1;;;;;4887:30:40;;;;;;;;4932:41;;;;-1:-1:-1;;4932:41:40;4813:167;:::o;5029:121::-;5086:8;:20;;-1:-1:-1;;;;;;5086:20:40;-1:-1:-1;;;;;5086:20:40;;;;;;;;5121:22;;;;-1:-1:-1;;5121:22:40;5029:121;:::o;5229:189::-;5298:19;:55;;-1:-1:-1;;;;;;5298:55:40;-1:-1:-1;;;;;5298:55:40;;;;;;;;5368:43;;;;-1:-1:-1;;5368:43:40;5229:189;:::o;14:265:56:-;87:9;;;118;;135:15;;;129:22;;115:37;105:168;;195:10;190:3;186:20;183:1;176:31;230:4;227:1;220:15;258:4;255:1;248:15;105:168;14:265;;;;:::o;284:217::-;324:1;350;340:132;;394:10;389:3;385:20;382:1;375:31;429:4;426:1;419:15;457:4;454:1;447:15;340:132;-1:-1:-1;486:9:56;;284:217::o;506:147::-;-1:-1:-1;;;;;597:31:56;;587:42;;577:70;;643:1;640;633:12;577:70;506:147;:::o;658:591::-;770:6;778;786;839:2;827:9;818:7;814:23;810:32;807:52;;;855:1;852;845:12;807:52;887:9;881:16;906:47;947:5;906:47;:::i;:::-;1022:2;1007:18;;1001:25;972:5;;-1:-1:-1;1035:49:56;1001:25;1035:49;:::i;:::-;1155:2;1140:18;;1134:25;1103:7;;-1:-1:-1;1168:49:56;1134:25;1168:49;:::i;:::-;1236:7;1226:17;;;658:591;;;;;:::o;:::-;269:6186:40;;;;;;",
    "linkReferences": {}
  },
  "deployedBytecode": {
    "object": "0x608060405234801561001057600080fd5b506004361061009e5760003560e01c80638ce74426116100665780638ce744261461012157806399fbab8814610134578063a126d601146101d5578063aa93186d146101e8578063ef353917146101fb57600080fd5b806301877020146100a35780630a9d793d146100b85780631558c966146100cb5780635004d36c146100de578063665a11ca1461010e575b600080fd5b6100b66100b1366004610c3e565b61020e565b005b6100b66100c6366004610c3e565b610258565b6100b66100d9366004610c70565b6102a2565b6005546100f1906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b6002546100f1906001600160a01b031681565b6003546100f1906001600160a01b031681565b610190610142366004610ca9565b6004602052600090815260409020805460018201546002909201546001600160a01b03909116916001600160801b03811691600160801b820463ffffffff1691600160a01b900460ff169085565b604080516001600160a01b0390961686526001600160801b03909416602086015263ffffffff909216928401929092529015156060830152608082015260a001610105565b6100b66101e3366004610ca9565b610598565b6100b66101f6366004610cd8565b610612565b6100b6610209366004610c3e565b610653565b600280546001600160a01b0319166001600160a01b0383169081179091556040517fe57f71636571365571c0eaeaeb54e1d9e0065804f056a57a2a29448524f7d18a90600090a250565b600380546001600160a01b0319166001600160a01b0383169081179091556040517f9269d63ac6e0360a152db45a73e3e9e471a002419dff28abc7b58efaa211a2ba90600090a250565b6102b0620f42406005610dac565b82101580156102cc57506102c8620f42406064610dac565b8211155b6103305760405162461bcd60e51b815260206004820152602a60248201527f5472616465506169723a3a6f70656e506f736974696f6e3a20496e76616c6964604482015269103632bb32b930b3b29760b11b60648201526084015b60405180910390fd5b629896808310158015610348575064e8d4a510008311155b6103a95760405162461bcd60e51b815260206004820152602c60248201527f5472616465506169723a3a6f70656e506f736974696f6e3a20496e76616c696460448201526b1031b7b63630ba32b930b61760a11b6064820152608401610327565b60006103b361069d565b90506000806103c3838686610798565b60025460405163297576c360e21b8152336004820152602481018a905292945090925042916000916001600160a01b03169063a5d5db0c906044016020604051808303816000875af115801561041d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104419190610dc9565b60018054919250600061045383610de2565b90915550506040805160a081018252338082526001600160801b03808516602080850191825263ffffffff808e168688019081528d151560608801908152608088018e81526001805460009081526004909652948a9020985189546001600160a01b03919091166001600160a01b0319918216178a5595518986018054945193511515600160a01b0260ff60a01b1994909616600160801b029490971697169690961791909117161790915590516002909301929092559054915190917f664218bb5e99fd4ca867d8e92f8fdbeddc8aac8132245e8efecdae2576e3789e9161058691908c9086908d908d908d908d908d908d90988952602089019790975260408801959095526060870193909352901515608086015260a085015260c084015260e08301526101008201526101200190565b60405180910390a25050505050505050565b60006105a38261083f565b90508061060e5760405162461bcd60e51b815260206004820152603360248201527f5472616465506169723a3a636c6f7365506f736974696f6e3a20506f7369746960448201527237b71034b9903737ba1031b637b9b0b136329760691b6064820152608401610327565b5050565b60005b815181101561060e5761064082828151811061063357610633610dfb565b602002602001015161083f565b508061064b81610de2565b915050610615565b600580546001600160a01b0319166001600160a01b0383169081179091556040517fe961dda575ed805d146eaa4042ec32dc5f24ac9c6ea5bcee7647d4ae801f6fe790600090a250565b600080600560009054906101000a90046001600160a01b03166001600160a01b031663feaf968c6040518163ffffffff1660e01b815260040160a060405180830381865afa1580156106f3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107179190610e2b565b505050915050600081136107935760405162461bcd60e51b815260206004820152603f60248201527f5472616465506169723a3a5f67657443757272656e7450726963653a2046616960448201527f6c656420746f206665746368207468652063757272656e742070726963652e006064820152608401610327565b919050565b60008082156107ee57836107af620f424087610dac565b6107b99190610e7b565b6107c39086610e9d565b9150836107d3620f424087610dac565b6107dd9190610e7b565b6107e79086610eb0565b9050610837565b836107fc620f424087610dac565b6108069190610e7b565b6108109086610eb0565b915083610820620f424087610dac565b61082a9190610e7b565b6108349086610e9d565b90505b935093915050565b600081815260046020526040812080546001600160a01b03166108655750600092915050565b600061086f61069d565b60028301546001840154919250600091829182916108a59190600160801b810463ffffffff1690600160a01b900460ff16610798565b60018701549193509150600160a01b900460ff161561090c578084106108da5760018501546001600160801b03169250610949565b8184116108ff5760018501546108f8906001600160801b0316610ec3565b9250610949565b5060009695505050505050565b8084116109285760018501546001600160801b03169250610949565b8184106108ff576001850154610946906001600160801b0316610ec3565b92505b600083600f0b13156109f5576002805486546001600160a01b039182169263a9059cbb929091169061098090600f88900b90610ef2565b6040516001600160e01b031960e085901b1681526001600160a01b03909216600483015260248201526044016020604051808303816000875af11580156109cb573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109ef9190610f22565b50610b77565b600080546001870154620f424091610a15916001600160801b0316610dac565b610a1f9190610e7b565b60025460035460405163a9059cbb60e01b81526001600160a01b03918216600482015260248101849052929350169063a9059cbb906044016020604051808303816000875af1158015610a76573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a9a9190610f22565b506002805460018801546001600160a01b03909116916342966c68918491610acb916001600160801b031690610f3f565b6001600160801b0316610ade9190610e9d565b6040518263ffffffff1660e01b8152600401610afc91815260200190565b600060405180830381600087803b158015610b1657600080fd5b505af1158015610b2a573d6000803e3d6000fd5b5050600354604080516001600160a01b039092168252602082018590527f110f5f0187a3a1acba865eca199d48ecae4bfe8aaac55910fa3c0684a0abbd9a935001905060405180910390a1505b84546001860154604080518a8152602081018890524281830152600f87900b6060820152600160a01b90920460ff1615156080830152516001600160a01b03909216917f7f0e648fab91ce864339c747d7bcf7e42c0b796ff39ea0c668e810495f1278cc9160a0908290030190a2505050600093845250506004602052506040812080546001600160a01b0319168155600180820180546001600160a81b031916905560029091019190915590565b6001600160a01b0381168114610c3b57600080fd5b50565b600060208284031215610c5057600080fd5b8135610c5b81610c26565b9392505050565b8015158114610c3b57600080fd5b600080600060608486031215610c8557600080fd5b83359250602084013591506040840135610c9e81610c62565b809150509250925092565b600060208284031215610cbb57600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b60006020808385031215610ceb57600080fd5b823567ffffffffffffffff80821115610d0357600080fd5b818501915085601f830112610d1757600080fd5b813581811115610d2957610d29610cc2565b8060051b604051601f19603f83011681018181108582111715610d4e57610d4e610cc2565b604052918252848201925083810185019188831115610d6c57600080fd5b938501935b82851015610d8a57843584529385019392850192610d71565b98975050505050505050565b634e487b7160e01b600052601160045260246000fd5b8082028115828204841417610dc357610dc3610d96565b92915050565b600060208284031215610ddb57600080fd5b5051919050565b600060018201610df457610df4610d96565b5060010190565b634e487b7160e01b600052603260045260246000fd5b805169ffffffffffffffffffff8116811461079357600080fd5b600080600080600060a08688031215610e4357600080fd5b610e4c86610e11565b9450602086015193506040860151925060608601519150610e6f60808701610e11565b90509295509295909350565b600082610e9857634e487b7160e01b600052601260045260246000fd5b500490565b81810381811115610dc357610dc3610d96565b80820180821115610dc357610dc3610d96565b600081600f0b6f7fffffffffffffffffffffffffffffff198103610ee957610ee9610d96565b60000392915050565b80820260008212600160ff1b84141615610f0e57610f0e610d96565b8181058314821517610dc357610dc3610d96565b600060208284031215610f3457600080fd5b8151610c5b81610c62565b6001600160801b03818116838216028082169190828114610f6257610f62610d96565b50509291505056fea264697066735822122054ff3e68eed8cab2e31a759cad0fc3a8c9c3ba2165a578e2b061d66367df01dd64736f6c63430008130033",
    "sourceMap": "269:6186:40:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4813:167;;;;;;:::i;:::-;;:::i;:::-;;5029:121;;;;;;:::i;:::-;;:::i;1383:1090::-;;;;;;:::i;:::-;;:::i;929:48::-;;;;;-1:-1:-1;;;;;929:48:40;;;;;;-1:-1:-1;;;;;1426:32:56;;;1408:51;;1396:2;1381:18;929:48:40;;;;;;;;689:35;;;;;-1:-1:-1;;;;;689:35:40;;;776:23;;;;;-1:-1:-1;;;;;776:23:40;;;806:45;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;806:45:40;;;;-1:-1:-1;;;;;806:45:40;;;-1:-1:-1;;;806:45:40;;;;;-1:-1:-1;;;806:45:40;;;;;;;;;;;-1:-1:-1;;;;;2364:32:56;;;2346:51;;-1:-1:-1;;;;;2433:47:56;;;2428:2;2413:18;;2406:75;2529:10;2517:23;;;2497:18;;;2490:51;;;;2584:14;;2577:22;2572:2;2557:18;;2550:50;2631:3;2616:19;;2609:35;2333:3;2318:19;806:45:40;2095:555:56;2587:191:40;;;;;;:::i;:::-;;:::i;4566:183::-;;;;;;:::i;:::-;;:::i;5229:189::-;;;;;;:::i;:::-;;:::i;4813:167::-;4887:13;:30;;-1:-1:-1;;;;;;4887:30:40;-1:-1:-1;;;;;4887:30:40;;;;;;;;4932:41;;;;-1:-1:-1;;4932:41:40;4813:167;:::o;5029:121::-;5086:8;:20;;-1:-1:-1;;;;;;5086:20:40;-1:-1:-1;;;;;5086:20:40;;;;;;;;5121:22;;;;-1:-1:-1;;5121:22:40;5029:121;:::o;1383:1090::-;439:13;345:3;439:1;:13;:::i;:::-;1483:8;:24;;:52;;;;-1:-1:-1;386:15:40;345:3;386;:15;:::i;:::-;1511:8;:24;;1483:52;1475:107;;;;-1:-1:-1;;;1475:107:40;;4414:2:56;1475:107:40;;;4396:21:56;4453:2;4433:18;;;4426:30;4492:34;4472:18;;;4465:62;-1:-1:-1;;;4543:18:56;;;4536:40;4593:19;;1475:107:40;;;;;;;;;493:9;1613:10;:28;;:60;;;;;542:15;1645:10;:28;;1613:60;1592:139;;;;-1:-1:-1;;;1592:139:40;;4825:2:56;1592:139:40;;;4807:21:56;4864:2;4844:18;;;4837:30;4903:34;4883:18;;;4876:62;-1:-1:-1;;;4954:18:56;;;4947:42;5006:19;;1592:139:40;4623:408:56;1592:139:40;1742:18;1763;:16;:18::i;:::-;1742:39;;1792:24;1818:23;1845:52;1868:10;1880:8;1890:6;1845:22;:52::i;:::-;1984:13;;1969:71;;-1:-1:-1;;;1969:71:40;;2017:10;1969:71;;;5210:51:56;5277:18;;;5270:34;;;1791:106:40;;-1:-1:-1;1791:106:40;;-1:-1:-1;1926:15:40;;1907:16;;-1:-1:-1;;;;;1984:13:40;;1969:47;;5183:18:56;;1969:71:40;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;2051:15;:17;;1952:88;;-1:-1:-1;2051:15:40;:17;;;:::i;:::-;;;;-1:-1:-1;;2107:75:40;;;;;;;;2116:10;2107:75;;;-1:-1:-1;;;;;2107:75:40;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2088:15;;;-1:-1:-1;2078:26:40;;;:9;:26;;;;;;;:104;;;;-1:-1:-1;;;;;2078:104:40;;;;-1:-1:-1;;;;;;2078:104:40;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;2078:104:40;-1:-1:-1;;;;2078:104:40;;;;-1:-1:-1;;;2078:104:40;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2250:15;;2198:268;;2116:10;;2198:268;;;;2250:15;2279:10;;2136:6;;2152:8;;2163:6;;2171:10;;2389:16;;2419:15;;2448:8;;6009:25:56;;;6065:2;6050:18;;6043:34;;;;6108:2;6093:18;;6086:34;;;;6151:2;6136:18;;6129:34;;;;6207:14;;6200:22;6194:3;6179:19;;6172:51;6254:3;6239:19;;6232:35;6298:3;6283:19;;6276:35;6342:3;6327:19;;6320:35;6386:3;6371:19;;6364:35;5996:3;5981:19;;5644:761;2198:268:40;;;;;;;;1465:1008;;;;;1383:1090;;;:::o;2587:191::-;2649:12;2664:26;2679:10;2664:14;:26::i;:::-;2649:41;;2708:7;2700:71;;;;-1:-1:-1;;;2700:71:40;;6612:2:56;2700:71:40;;;6594:21:56;6651:2;6631:18;;;6624:30;6690:34;6670:18;;;6663:62;-1:-1:-1;;;6741:18:56;;;6734:49;6800:19;;2700:71:40;6410:415:56;2700:71:40;2639:139;2587:191;:::o;4566:183::-;4644:9;4639:104;4663:11;:18;4659:1;:22;4639:104;;;4702:30;4717:11;4729:1;4717:14;;;;;;;;:::i;:::-;;;;;;;4702;:30::i;:::-;-1:-1:-1;4683:3:40;;;;:::i;:::-;;;;4639:104;;5229:189;5298:19;:55;;-1:-1:-1;;;;;;5298:55:40;-1:-1:-1;;;;;5298:55:40;;;;;;;;5368:43;;;;-1:-1:-1;;5368:43:40;5229:189;:::o;5500:262::-;5551:7;5573:12;5592:19;;;;;;;;;-1:-1:-1;;;;;5592:19:40;-1:-1:-1;;;;;5592:35:40;;:37;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;5570:59;;;;;;5655:1;5647:5;:9;5639:85;;;;-1:-1:-1;;;5639:85:40;;7826:2:56;5639:85:40;;;7808:21:56;7865:2;7845:18;;;7838:30;7904:34;7884:18;;;7877:62;7975:33;7955:18;;;7948:61;8026:19;;5639:85:40;7624:427:56;5639:85:40;5749:5;5500:262;-1:-1:-1;5500:262:40:o;5899:554::-;6028:24;6054:23;6097:6;6093:354;;;6176:8;6151:22;345:3;6151:10;:22;:::i;:::-;:33;;;;:::i;:::-;6138:46;;:10;:46;:::i;:::-;6119:65;-1:-1:-1;6254:8:40;6229:22;345:3;6229:10;:22;:::i;:::-;:33;;;;:::i;:::-;6216:46;;:10;:46;:::i;:::-;6198:64;;6093:354;;;6350:8;6325:22;345:3;6325:10;:22;:::i;:::-;:33;;;;:::i;:::-;6312:46;;:10;:46;:::i;:::-;6293:65;-1:-1:-1;6428:8:40;6403:22;345:3;6403:10;:22;:::i;:::-;:33;;;;:::i;:::-;6390:46;;:10;:46;:::i;:::-;6372:64;;6093:354;5899:554;;;;;;:::o;2844:1639::-;2906:12;2958:21;;;:9;:21;;;;;2994:15;;-1:-1:-1;;;;;2994:15:40;2990:106;;-1:-1:-1;3080:5:40;;2844:1639;-1:-1:-1;;2844:1639:40:o;2990:106::-;3106:18;3127;:16;:18::i;:::-;3265:19;;;;3286:17;;;;3106:39;;-1:-1:-1;3155:10:40;;;;;;3242:79;;3265:19;-1:-1:-1;;;3286:17:40;;;;;-1:-1:-1;;;3305:15:40;;;;3242:22;:79::i;:::-;3336:15;;;;3176:145;;-1:-1:-1;3176:145:40;-1:-1:-1;;;;3336:15:40;;;;3332:581;;;3385:15;3371:10;:29;3367:253;;3433:15;;;;-1:-1:-1;;;;;3433:15:40;;-1:-1:-1;3332:581:40;;3367:253;3488:16;3474:10;:30;3470:150;;3538:15;;;;3530:24;;-1:-1:-1;;;;;3538:15:40;3530:24;:::i;:::-;3524:30;;3332:581;;3470:150;-1:-1:-1;3600:5:40;;2844:1639;-1:-1:-1;;;;;;2844:1639:40:o;3332:581::-;3668:15;3654:10;:29;3650:253;;3716:15;;;;-1:-1:-1;;;;;3716:15:40;;-1:-1:-1;3650:253:40;;;3771:16;3757:10;:30;3753:150;;3821:15;;;;3813:24;;-1:-1:-1;;;;;3821:15:40;3813:24;:::i;:::-;3807:30;;3753:150;3933:1;3927:3;:7;;;3923:383;;;3950:13;;;3973:15;;-1:-1:-1;;;;;3950:13:40;;;;:22;;3973:15;;;;3998;;:11;;;;;:15;:::i;:::-;3950:65;;-1:-1:-1;;;;;;3950:65:40;;;;;;;-1:-1:-1;;;;;5228:32:56;;;3950:65:40;;;5210:51:56;5277:18;;;5270:34;5183:18;;3950:65:40;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;3923:383;;;4046:21;4088:3;;4070:15;;;;345:3;;4070:21;;-1:-1:-1;;;;;4070:15:40;:21;:::i;:::-;:33;;;;:::i;:::-;4117:13;;4140:8;;4117:47;;-1:-1:-1;;;4117:47:40;;-1:-1:-1;;;;;4140:8:40;;;4117:47;;;5210:51:56;5277:18;;;5270:34;;;4046:57:40;;-1:-1:-1;4117:13:40;;:22;;5183:18:56;;4117:47:40;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1;4178:13:40;;;;4197:15;;;-1:-1:-1;;;;;4178:13:40;;;;:18;;4219:13;;4197:19;;-1:-1:-1;;;;;4197:15:40;;:19;:::i;:::-;-1:-1:-1;;;;;4197:35:40;;;;;:::i;:::-;4178:55;;;;;;;;;;;;;9676:25:56;;9664:2;9649:18;;9530:177;4178:55:40;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;4271:8:40;;4252:43;;;-1:-1:-1;;;;;4271:8:40;;;5210:51:56;;5292:2;5277:18;;5270:34;;;4252:43:40;;-1:-1:-1;5183:18:56;;-1:-1:-1;4252:43:40;;;;;;;4032:274;3923:383;4336:15;;;4399;;;4321:94;;;9963:25:56;;;10019:2;10004:18;;9997:34;;;4377:15:40;10047:18:56;;;10040:34;10121:2;10110:22;;;10105:2;10090:18;;10083:50;-1:-1:-1;;;4399:15:40;;;;;10177:14:56;10170:22;10164:3;10149:19;;10142:51;4321:94:40;-1:-1:-1;;;;;4336:15:40;;;;4321:94;;9950:3:56;4321:94:40;;;;;;;-1:-1:-1;;;4433:21:40;;;;-1:-1:-1;;4433:9:40;:21;;-1:-1:-1;4433:21:40;;;4426:28;;-1:-1:-1;;;;;;4426:28:40;;;;;;;;;-1:-1:-1;;;;;;4426:28:40;;;;;;;;;;;;2844:1639::o;14:147:56:-;-1:-1:-1;;;;;105:31:56;;95:42;;85:70;;151:1;148;141:12;85:70;14:147;:::o;166:287::-;249:6;302:2;290:9;281:7;277:23;273:32;270:52;;;318:1;315;308:12;270:52;357:9;344:23;376:47;417:5;376:47;:::i;:::-;442:5;166:287;-1:-1:-1;;;166:287:56:o;726:118::-;812:5;805:13;798:21;791:5;788:32;778:60;;834:1;831;824:12;849:377;923:6;931;939;992:2;980:9;971:7;967:23;963:32;960:52;;;1008:1;1005;998:12;960:52;1044:9;1031:23;1021:33;;1101:2;1090:9;1086:18;1073:32;1063:42;;1155:2;1144:9;1140:18;1127:32;1168:28;1190:5;1168:28;:::i;:::-;1215:5;1205:15;;;849:377;;;;;:::o;1910:180::-;1969:6;2022:2;2010:9;2001:7;1997:23;1993:32;1990:52;;;2038:1;2035;2028:12;1990:52;-1:-1:-1;2061:23:56;;1910:180;-1:-1:-1;1910:180:56:o;2655:127::-;2716:10;2711:3;2707:20;2704:1;2697:31;2747:4;2744:1;2737:15;2771:4;2768:1;2761:15;2787:1115;2871:6;2902:2;2945;2933:9;2924:7;2920:23;2916:32;2913:52;;;2961:1;2958;2951:12;2913:52;3001:9;2988:23;3030:18;3071:2;3063:6;3060:14;3057:34;;;3087:1;3084;3077:12;3057:34;3125:6;3114:9;3110:22;3100:32;;3170:7;3163:4;3159:2;3155:13;3151:27;3141:55;;3192:1;3189;3182:12;3141:55;3228:2;3215:16;3250:2;3246;3243:10;3240:36;;;3256:18;;:::i;:::-;3302:2;3299:1;3295:10;3334:2;3328:9;3397:2;3393:7;3388:2;3384;3380:11;3376:25;3368:6;3364:38;3452:6;3440:10;3437:22;3432:2;3420:10;3417:18;3414:46;3411:72;;;3463:18;;:::i;:::-;3499:2;3492:22;3549:18;;;3583:15;;;;-1:-1:-1;3625:11:56;;;3621:20;;;3653:19;;;3650:39;;;3685:1;3682;3675:12;3650:39;3709:11;;;;3729:142;3745:6;3740:3;3737:15;3729:142;;;3811:17;;3799:30;;3762:12;;;;3849;;;;3729:142;;;3890:6;2787:1115;-1:-1:-1;;;;;;;;2787:1115:56:o;3907:127::-;3968:10;3963:3;3959:20;3956:1;3949:31;3999:4;3996:1;3989:15;4023:4;4020:1;4013:15;4039:168;4112:9;;;4143;;4160:15;;;4154:22;;4140:37;4130:71;;4181:18;;:::i;:::-;4039:168;;;;:::o;5315:184::-;5385:6;5438:2;5426:9;5417:7;5413:23;5409:32;5406:52;;;5454:1;5451;5444:12;5406:52;-1:-1:-1;5477:16:56;;5315:184;-1:-1:-1;5315:184:56:o;5504:135::-;5543:3;5564:17;;;5561:43;;5584:18;;:::i;:::-;-1:-1:-1;5631:1:56;5620:13;;5504:135::o;6830:127::-;6891:10;6886:3;6882:20;6879:1;6872:31;6922:4;6919:1;6912:15;6946:4;6943:1;6936:15;6962:179;7040:13;;7093:22;7082:34;;7072:45;;7062:73;;7131:1;7128;7121:12;7146:473;7249:6;7257;7265;7273;7281;7334:3;7322:9;7313:7;7309:23;7305:33;7302:53;;;7351:1;7348;7341:12;7302:53;7374:39;7403:9;7374:39;:::i;:::-;7364:49;;7453:2;7442:9;7438:18;7432:25;7422:35;;7497:2;7486:9;7482:18;7476:25;7466:35;;7541:2;7530:9;7526:18;7520:25;7510:35;;7564:49;7608:3;7597:9;7593:19;7564:49;:::i;:::-;7554:59;;7146:473;;;;;;;;:::o;8056:217::-;8096:1;8122;8112:132;;8166:10;8161:3;8157:20;8154:1;8147:31;8201:4;8198:1;8191:15;8229:4;8226:1;8219:15;8112:132;-1:-1:-1;8258:9:56;;8056:217::o;8278:128::-;8345:9;;;8366:11;;;8363:37;;;8380:18;;:::i;8411:125::-;8476:9;;;8497:10;;;8494:36;;;8510:18;;:::i;8541:213::-;8576:3;8624:5;8620:2;8609:21;8658:34;8654:39;8645:7;8642:52;8639:78;;8697:18;;:::i;:::-;8737:1;8733:15;;8541:213;-1:-1:-1;;8541:213:56:o;8759:237::-;8831:9;;;8798:7;8856:9;;-1:-1:-1;;;8867:18:56;;8852:34;8849:60;;;8889:18;;:::i;:::-;8962:1;8953:7;8948:16;8945:1;8942:23;8938:1;8931:9;8928:38;8918:72;;8970:18;;:::i;9001:245::-;9068:6;9121:2;9109:9;9100:7;9096:23;9092:32;9089:52;;;9137:1;9134;9127:12;9089:52;9169:9;9163:16;9188:28;9210:5;9188:28;:::i;9251:274::-;-1:-1:-1;;;;;9389:10:56;;;9401;;;9385:27;9432:20;;;;9323:34;9471:24;;;9461:58;;9499:18;;:::i;:::-;9461:58;;9251:274;;;;:::o",
    "linkReferences": {}
  },
  "methodIdentifiers": {
    "chainlinkAggregator()": "5004d36c",
    "closePosition(uint256)": "a126d601",
    "closePositions(uint256[])": "aa93186d",
    "liquidityPool()": "665a11ca",
    "openPosition(uint256,uint256,bool)": "1558c966",
    "positions(uint256)": "99fbab88",
    "protocol()": "8ce74426",
    "setChainlinkAggregator(address)": "ef353917",
    "setLiquidityPool(address)": "01877020",
    "setProtocol(address)": "0a9d793d"
  },
  "rawMetadata": "{\"compiler\":{\"version\":\"0.8.19+commit.7dd6d404\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"contract ILiquidityPool\",\"name\":\"liquidityPool_\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"protocol_\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"chainlinkAggregator_\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"aggregator\",\"type\":\"address\"}],\"name\":\"ChainlinkAggregatorSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"liquidityPool\",\"type\":\"address\"}],\"name\":\"LiquidityPoolSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"closePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"closeDate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"pnlShares\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"isLong\",\"type\":\"bool\"}],\"name\":\"PositionClosed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"collateral\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"shares\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"leverage\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"isLong\",\"type\":\"bool\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"entryPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"liquidationPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"takeProfitPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"openDate\",\"type\":\"uint256\"}],\"name\":\"PositionOpened\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"protocol\",\"type\":\"address\"}],\"name\":\"ProtocolSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"protocol\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"protocolShare\",\"type\":\"uint256\"}],\"name\":\"ProtocolShareTaken\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"chainlinkAggregator\",\"outputs\":[{\"internalType\":\"contract AggregatorV3Interface\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"}],\"name\":\"closePosition\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256[]\",\"name\":\"positionIds\",\"type\":\"uint256[]\"}],\"name\":\"closePositions\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"liquidityPool\",\"outputs\":[{\"internalType\":\"contract ILiquidityPool\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"collateral\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"leverage\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"isLong\",\"type\":\"bool\"}],\"name\":\"openPosition\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"positions\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"internalType\":\"uint128\",\"name\":\"shares\",\"type\":\"uint128\"},{\"internalType\":\"uint32\",\"name\":\"leverage\",\"type\":\"uint32\"},{\"internalType\":\"bool\",\"name\":\"isLong\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"entryPrice\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"protocol\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"aggregator\",\"type\":\"address\"}],\"name\":\"setChainlinkAggregator\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract ILiquidityPool\",\"name\":\"_liquidityPool\",\"type\":\"address\"}],\"name\":\"setLiquidityPool\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_protocol\",\"type\":\"address\"}],\"name\":\"setProtocol\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"constructor\":{\"details\":\"TradePair constructor sets the liquidity pool, protocol, and chainlink aggregator.\"}},\"title\":\"TradePair - A contract for managing leveraged trading positions.\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"chainlinkAggregator()\":{\"notice\":\"The Chainlink aggregator for fetching the asset price.\"},\"closePosition(uint256)\":{\"notice\":\"Allows a trader to close a trading position if it's either 100% in profit or -100% in loss.\"},\"closePositions(uint256[])\":{\"notice\":\"Allows a trader to close multiple trading positions at once.\"},\"liquidityPool()\":{\"notice\":\"The associated liquidity pool.\"},\"openPosition(uint256,uint256,bool)\":{\"notice\":\"Allows a trader to open a leveraged trading position.\"},\"protocol()\":{\"notice\":\"The address of the protocol.\"},\"setChainlinkAggregator(address)\":{\"notice\":\"Sets the Chainlink aggregator for fetching asset prices.\"},\"setLiquidityPool(address)\":{\"notice\":\"Sets the liquidity pool for the contract.\"},\"setProtocol(address)\":{\"notice\":\"Sets the protocol address.\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/TradePair.sol\":\"TradePair\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/=lib/openzeppelin-contracts/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\"]},\"sources\":{\"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0x9750c6b834f7b43000631af5cc30001c5f547b3ceb3635488f140f60e897ea6b\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://5a7d5b1ef5d8d5889ad2ed89d8619c09383b80b72ab226e0fe7bde1636481e34\",\"dweb:/ipfs/QmebXWgtEfumQGBdVeM6c71McLixYXQP5Bk6kKXuoY4Bmr\"]},\"src/TradePair.sol\":{\"keccak256\":\"0x433ab319c5d103a65406a0b0d23f4149925649c45c0627c2599d3bb0fb58d5fa\",\"license\":\"UNLICENSED\",\"urls\":[\"bzz-raw://8f6e6c9710d312203e6eeef3227402da37396de20da26f25054eb6dc19b53176\",\"dweb:/ipfs/QmVfgtnvCwvGFf4oFpUPjvD5zB3JhgoUUjeHZY87xTD7kL\"]},\"src/external/AggregatorV3Interface.sol\":{\"keccak256\":\"0xece070c6cb81404d46ebd47ec6d3937fdc6a355847fe2aaaeb8ad0405b66bb40\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://3052fc2d76a9e1f3d47f1d7d87c9c23c8c2d2886e9be3b17b45523a208423008\",\"dweb:/ipfs/Qmf97rypuqoVGXdY2nFx2MynMx1b5PvweGrczcF4SKS6Mn\"]},\"src/interfaces/ILiquidityPool.sol\":{\"keccak256\":\"0x04243697372107f624a49c3547ba2a05cac4a129e2fc617063d0359104da73e0\",\"license\":\"UNLICENSED\",\"urls\":[\"bzz-raw://0819499dddb4838cb13197cc026cc0b341a3b0b5ac6f4b97f59fc92b7d78478d\",\"dweb:/ipfs/Qmewxto8bU9wZhgk7dLdXzDHJKAukHw5PntBTAXZLuK9hn\"]},\"src/interfaces/ITradePair.sol\":{\"keccak256\":\"0x95701e2062e07d003e883e9774261b68a7a5ce0930765609321d792669a28e4b\",\"license\":\"UNLICENSED\",\"urls\":[\"bzz-raw://a21b9897347ff472b496bad0787b6a141bfdf9b6dad8221cea0b316801df0abb\",\"dweb:/ipfs/QmafMDUKkp2vs1qpxvWmynhZVaWtyZJbVcwhL18jvJ4qkK\"]}},\"version\":1}",
  "metadata": {
    "compiler": {
      "version": "0.8.19+commit.7dd6d404"
    },
    "language": "Solidity",
    "output": {
      "abi": [
        {
          "inputs": [
            {
              "internalType": "contract ILiquidityPool",
              "name": "liquidityPool_",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "protocol_",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "chainlinkAggregator_",
              "type": "address"
            }
          ],
          "stateMutability": "nonpayable",
          "type": "constructor"
        },
        {
          "inputs": [
            {
              "internalType": "address",
              "name": "aggregator",
              "type": "address",
              "indexed": true
            }
          ],
          "type": "event",
          "name": "ChainlinkAggregatorSet",
          "anonymous": false
        },
        {
          "inputs": [
            {
              "internalType": "address",
              "name": "liquidityPool",
              "type": "address",
              "indexed": true
            }
          ],
          "type": "event",
          "name": "LiquidityPoolSet",
          "anonymous": false
        },
        {
          "inputs": [
            {
              "internalType": "address",
              "name": "trader",
              "type": "address",
              "indexed": true
            },
            {
              "internalType": "uint256",
              "name": "positionId",
              "type": "uint256",
              "indexed": false
            },
            {
              "internalType": "uint256",
              "name": "closePrice",
              "type": "uint256",
              "indexed": false
            },
            {
              "internalType": "uint256",
              "name": "closeDate",
              "type": "uint256",
              "indexed": false
            },
            {
              "internalType": "int256",
              "name": "pnlShares",
              "type": "int256",
              "indexed": false
            },
            {
              "internalType": "bool",
              "name": "isLong",
              "type": "bool",
              "indexed": false
            }
          ],
          "type": "event",
          "name": "PositionClosed",
          "anonymous": false
        },
        {
          "inputs": [
            {
              "internalType": "address",
              "name": "trader",
              "type": "address",
              "indexed": true
            },
            {
              "internalType": "uint256",
              "name": "positionId",
              "type": "uint256",
              "indexed": false
            },
            {
              "internalType": "uint256",
              "name": "collateral",
              "type": "uint256",
              "indexed": false
            },
            {
              "internalType": "uint256",
              "name": "shares",
              "type": "uint256",
              "indexed": false
            },
            {
              "internalType": "uint256",
              "name": "leverage",
              "type": "uint256",
              "indexed": false
            },
            {
              "internalType": "bool",
              "name": "isLong",
              "type": "bool",
              "indexed": false
            },
            {
              "internalType": "uint256",
              "name": "entryPrice",
              "type": "uint256",
              "indexed": false
            },
            {
              "internalType": "uint256",
              "name": "liquidationPrice",
              "type": "uint256",
              "indexed": false
            },
            {
              "internalType": "uint256",
              "name": "takeProfitPrice",
              "type": "uint256",
              "indexed": false
            },
            {
              "internalType": "uint256",
              "name": "openDate",
              "type": "uint256",
              "indexed": false
            }
          ],
          "type": "event",
          "name": "PositionOpened",
          "anonymous": false
        },
        {
          "inputs": [
            {
              "internalType": "address",
              "name": "protocol",
              "type": "address",
              "indexed": true
            }
          ],
          "type": "event",
          "name": "ProtocolSet",
          "anonymous": false
        },
        {
          "inputs": [
            {
              "internalType": "address",
              "name": "protocol",
              "type": "address",
              "indexed": false
            },
            {
              "internalType": "uint256",
              "name": "protocolShare",
              "type": "uint256",
              "indexed": false
            }
          ],
          "type": "event",
          "name": "ProtocolShareTaken",
          "anonymous": false
        },
        {
          "inputs": [],
          "stateMutability": "view",
          "type": "function",
          "name": "chainlinkAggregator",
          "outputs": [
            {
              "internalType": "contract AggregatorV3Interface",
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "inputs": [
            {
              "internalType": "uint256",
              "name": "positionId",
              "type": "uint256"
            }
          ],
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "closePosition"
        },
        {
          "inputs": [
            {
              "internalType": "uint256[]",
              "name": "positionIds",
              "type": "uint256[]"
            }
          ],
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "closePositions"
        },
        {
          "inputs": [],
          "stateMutability": "view",
          "type": "function",
          "name": "liquidityPool",
          "outputs": [
            {
              "internalType": "contract ILiquidityPool",
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "inputs": [
            {
              "internalType": "uint256",
              "name": "collateral",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "leverage",
              "type": "uint256"
            },
            {
              "internalType": "bool",
              "name": "isLong",
              "type": "bool"
            }
          ],
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "openPosition"
        },
        {
          "inputs": [
            {
              "internalType": "uint256",
              "name": "",
              "type": "uint256"
            }
          ],
          "stateMutability": "view",
          "type": "function",
          "name": "positions",
          "outputs": [
            {
              "internalType": "address",
              "name": "trader",
              "type": "address"
            },
            {
              "internalType": "uint128",
              "name": "shares",
              "type": "uint128"
            },
            {
              "internalType": "uint32",
              "name": "leverage",
              "type": "uint32"
            },
            {
              "internalType": "bool",
              "name": "isLong",
              "type": "bool"
            },
            {
              "internalType": "uint256",
              "name": "entryPrice",
              "type": "uint256"
            }
          ]
        },
        {
          "inputs": [],
          "stateMutability": "view",
          "type": "function",
          "name": "protocol",
          "outputs": [
            {
              "internalType": "address",
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "inputs": [
            {
              "internalType": "address",
              "name": "aggregator",
              "type": "address"
            }
          ],
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setChainlinkAggregator"
        },
        {
          "inputs": [
            {
              "internalType": "contract ILiquidityPool",
              "name": "_liquidityPool",
              "type": "address"
            }
          ],
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setLiquidityPool"
        },
        {
          "inputs": [
            {
              "internalType": "address",
              "name": "_protocol",
              "type": "address"
            }
          ],
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setProtocol"
        }
      ],
      "devdoc": {
        "kind": "dev",
        "methods": {
          "constructor": {
            "details": "TradePair constructor sets the liquidity pool, protocol, and chainlink aggregator."
          }
        },
        "version": 1
      },
      "userdoc": {
        "kind": "user",
        "methods": {
          "chainlinkAggregator()": {
            "notice": "The Chainlink aggregator for fetching the asset price."
          },
          "closePosition(uint256)": {
            "notice": "Allows a trader to close a trading position if it's either 100% in profit or -100% in loss."
          },
          "closePositions(uint256[])": {
            "notice": "Allows a trader to close multiple trading positions at once."
          },
          "liquidityPool()": {
            "notice": "The associated liquidity pool."
          },
          "openPosition(uint256,uint256,bool)": {
            "notice": "Allows a trader to open a leveraged trading position."
          },
          "protocol()": {
            "notice": "The address of the protocol."
          },
          "setChainlinkAggregator(address)": {
            "notice": "Sets the Chainlink aggregator for fetching asset prices."
          },
          "setLiquidityPool(address)": {
            "notice": "Sets the liquidity pool for the contract."
          },
          "setProtocol(address)": {
            "notice": "Sets the protocol address."
          }
        },
        "version": 1
      }
    },
    "settings": {
      "remappings": [
        ":@openzeppelin/=lib/openzeppelin-contracts/",
        ":ds-test/=lib/forge-std/lib/ds-test/src/",
        ":forge-std/=lib/forge-std/src/",
        ":openzeppelin-contracts/=lib/openzeppelin-contracts/"
      ],
      "optimizer": {
        "enabled": true,
        "runs": 200
      },
      "metadata": {
        "bytecodeHash": "ipfs"
      },
      "compilationTarget": {
        "src/TradePair.sol": "TradePair"
      },
      "libraries": {}
    },
    "sources": {
      "lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol": {
        "keccak256": "0x9750c6b834f7b43000631af5cc30001c5f547b3ceb3635488f140f60e897ea6b",
        "urls": [
          "bzz-raw://5a7d5b1ef5d8d5889ad2ed89d8619c09383b80b72ab226e0fe7bde1636481e34",
          "dweb:/ipfs/QmebXWgtEfumQGBdVeM6c71McLixYXQP5Bk6kKXuoY4Bmr"
        ],
        "license": "MIT"
      },
      "src/TradePair.sol": {
        "keccak256": "0x433ab319c5d103a65406a0b0d23f4149925649c45c0627c2599d3bb0fb58d5fa",
        "urls": [
          "bzz-raw://8f6e6c9710d312203e6eeef3227402da37396de20da26f25054eb6dc19b53176",
          "dweb:/ipfs/QmVfgtnvCwvGFf4oFpUPjvD5zB3JhgoUUjeHZY87xTD7kL"
        ],
        "license": "UNLICENSED"
      },
      "src/external/AggregatorV3Interface.sol": {
        "keccak256": "0xece070c6cb81404d46ebd47ec6d3937fdc6a355847fe2aaaeb8ad0405b66bb40",
        "urls": [
          "bzz-raw://3052fc2d76a9e1f3d47f1d7d87c9c23c8c2d2886e9be3b17b45523a208423008",
          "dweb:/ipfs/Qmf97rypuqoVGXdY2nFx2MynMx1b5PvweGrczcF4SKS6Mn"
        ],
        "license": "MIT"
      },
      "src/interfaces/ILiquidityPool.sol": {
        "keccak256": "0x04243697372107f624a49c3547ba2a05cac4a129e2fc617063d0359104da73e0",
        "urls": [
          "bzz-raw://0819499dddb4838cb13197cc026cc0b341a3b0b5ac6f4b97f59fc92b7d78478d",
          "dweb:/ipfs/Qmewxto8bU9wZhgk7dLdXzDHJKAukHw5PntBTAXZLuK9hn"
        ],
        "license": "UNLICENSED"
      },
      "src/interfaces/ITradePair.sol": {
        "keccak256": "0x95701e2062e07d003e883e9774261b68a7a5ce0930765609321d792669a28e4b",
        "urls": [
          "bzz-raw://a21b9897347ff472b496bad0787b6a141bfdf9b6dad8221cea0b316801df0abb",
          "dweb:/ipfs/QmafMDUKkp2vs1qpxvWmynhZVaWtyZJbVcwhL18jvJ4qkK"
        ],
        "license": "UNLICENSED"
      }
    },
    "version": 1
  },
  "ast": {
    "absolutePath": "src/TradePair.sol",
    "id": 33756,
    "exportedSymbols": {
      "AggregatorV3Interface": [
        33801
      ],
      "IERC20": [
        30713
      ],
      "ILiquidityPool": [
        33908
      ],
      "ITradePair": [
        34018
      ],
      "Position": [
        33922
      ],
      "TradePair": [
        33755
      ]
    },
    "nodeType": "SourceUnit",
    "src": "39:6417:40",
    "nodes": [
      {
        "id": 33207,
        "nodeType": "PragmaDirective",
        "src": "39:24:40",
        "nodes": [],
        "literals": [
          "solidity",
          "^",
          "0.8",
          ".19"
        ]
      },
      {
        "id": 33208,
        "nodeType": "ImportDirective",
        "src": "65:37:40",
        "nodes": [],
        "absolutePath": "src/interfaces/ITradePair.sol",
        "file": "./interfaces/ITradePair.sol",
        "nameLocation": "-1:-1:-1",
        "scope": 33756,
        "sourceUnit": 34019,
        "symbolAliases": [],
        "unitAlias": ""
      },
      {
        "id": 33209,
        "nodeType": "ImportDirective",
        "src": "103:41:40",
        "nodes": [],
        "absolutePath": "src/interfaces/ILiquidityPool.sol",
        "file": "./interfaces/ILiquidityPool.sol",
        "nameLocation": "-1:-1:-1",
        "scope": 33756,
        "sourceUnit": 33909,
        "symbolAliases": [],
        "unitAlias": ""
      },
      {
        "id": 33210,
        "nodeType": "ImportDirective",
        "src": "145:46:40",
        "nodes": [],
        "absolutePath": "src/external/AggregatorV3Interface.sol",
        "file": "./external/AggregatorV3Interface.sol",
        "nameLocation": "-1:-1:-1",
        "scope": 33756,
        "sourceUnit": 33802,
        "symbolAliases": [],
        "unitAlias": ""
      },
      {
        "id": 33755,
        "nodeType": "ContractDefinition",
        "src": "269:6186:40",
        "nodes": [
          {
            "id": 33216,
            "nodeType": "VariableDeclaration",
            "src": "308:40:40",
            "nodes": [],
            "constant": true,
            "mutability": "constant",
            "name": "PRECISION",
            "nameLocation": "333:9:40",
            "scope": 33755,
            "stateVariable": true,
            "storageLocation": "default",
            "typeDescriptions": {
              "typeIdentifier": "t_uint256",
              "typeString": "uint256"
            },
            "typeName": {
              "id": 33214,
              "name": "uint256",
              "nodeType": "ElementaryTypeName",
              "src": "308:7:40",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            },
            "value": {
              "hexValue": "316536",
              "id": 33215,
              "isConstant": false,
              "isLValue": false,
              "isPure": true,
              "kind": "number",
              "lValueRequested": false,
              "nodeType": "Literal",
              "src": "345:3:40",
              "typeDescriptions": {
                "typeIdentifier": "t_rational_1000000_by_1",
                "typeString": "int_const 1000000"
              },
              "value": "1e6"
            },
            "visibility": "private"
          },
          {
            "id": 33221,
            "nodeType": "VariableDeclaration",
            "src": "354:47:40",
            "nodes": [],
            "constant": true,
            "mutability": "constant",
            "name": "MAX_LEVERAGE",
            "nameLocation": "371:12:40",
            "scope": 33755,
            "stateVariable": true,
            "storageLocation": "default",
            "typeDescriptions": {
              "typeIdentifier": "t_uint256",
              "typeString": "uint256"
            },
            "typeName": {
              "id": 33217,
              "name": "uint256",
              "nodeType": "ElementaryTypeName",
              "src": "354:7:40",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            },
            "value": {
              "commonType": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              },
              "id": 33220,
              "isConstant": false,
              "isLValue": false,
              "isPure": true,
              "lValueRequested": false,
              "leftExpression": {
                "hexValue": "313030",
                "id": 33218,
                "isConstant": false,
                "isLValue": false,
                "isPure": true,
                "kind": "number",
                "lValueRequested": false,
                "nodeType": "Literal",
                "src": "386:3:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_rational_100_by_1",
                  "typeString": "int_const 100"
                },
                "value": "100"
              },
              "nodeType": "BinaryOperation",
              "operator": "*",
              "rightExpression": {
                "id": 33219,
                "name": "PRECISION",
                "nodeType": "Identifier",
                "overloadedDeclarations": [],
                "referencedDeclaration": 33216,
                "src": "392:9:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                }
              },
              "src": "386:15:40",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            },
            "visibility": "internal"
          },
          {
            "id": 33226,
            "nodeType": "VariableDeclaration",
            "src": "407:45:40",
            "nodes": [],
            "constant": true,
            "mutability": "constant",
            "name": "MIN_LEVERAGE",
            "nameLocation": "424:12:40",
            "scope": 33755,
            "stateVariable": true,
            "storageLocation": "default",
            "typeDescriptions": {
              "typeIdentifier": "t_uint256",
              "typeString": "uint256"
            },
            "typeName": {
              "id": 33222,
              "name": "uint256",
              "nodeType": "ElementaryTypeName",
              "src": "407:7:40",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            },
            "value": {
              "commonType": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              },
              "id": 33225,
              "isConstant": false,
              "isLValue": false,
              "isPure": true,
              "lValueRequested": false,
              "leftExpression": {
                "hexValue": "35",
                "id": 33223,
                "isConstant": false,
                "isLValue": false,
                "isPure": true,
                "kind": "number",
                "lValueRequested": false,
                "nodeType": "Literal",
                "src": "439:1:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_rational_5_by_1",
                  "typeString": "int_const 5"
                },
                "value": "5"
              },
              "nodeType": "BinaryOperation",
              "operator": "*",
              "rightExpression": {
                "id": 33224,
                "name": "PRECISION",
                "nodeType": "Identifier",
                "overloadedDeclarations": [],
                "referencedDeclaration": 33216,
                "src": "443:9:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                }
              },
              "src": "439:13:40",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            },
            "visibility": "internal"
          },
          {
            "id": 33231,
            "nodeType": "VariableDeclaration",
            "src": "459:43:40",
            "nodes": [],
            "constant": true,
            "mutability": "constant",
            "name": "MIN_COLLATERAL",
            "nameLocation": "476:14:40",
            "scope": 33755,
            "stateVariable": true,
            "storageLocation": "default",
            "typeDescriptions": {
              "typeIdentifier": "t_uint256",
              "typeString": "uint256"
            },
            "typeName": {
              "id": 33227,
              "name": "uint256",
              "nodeType": "ElementaryTypeName",
              "src": "459:7:40",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            },
            "value": {
              "commonType": {
                "typeIdentifier": "t_rational_10000000_by_1",
                "typeString": "int_const 10000000"
              },
              "id": 33230,
              "isConstant": false,
              "isLValue": false,
              "isPure": true,
              "lValueRequested": false,
              "leftExpression": {
                "hexValue": "315f30",
                "id": 33228,
                "isConstant": false,
                "isLValue": false,
                "isPure": true,
                "kind": "number",
                "lValueRequested": false,
                "nodeType": "Literal",
                "src": "493:3:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_rational_10_by_1",
                  "typeString": "int_const 10"
                },
                "value": "1_0"
              },
              "nodeType": "BinaryOperation",
              "operator": "*",
              "rightExpression": {
                "hexValue": "316536",
                "id": 33229,
                "isConstant": false,
                "isLValue": false,
                "isPure": true,
                "kind": "number",
                "lValueRequested": false,
                "nodeType": "Literal",
                "src": "499:3:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_rational_1000000_by_1",
                  "typeString": "int_const 1000000"
                },
                "value": "1e6"
              },
              "src": "493:9:40",
              "typeDescriptions": {
                "typeIdentifier": "t_rational_10000000_by_1",
                "typeString": "int_const 10000000"
              }
            },
            "visibility": "internal"
          },
          {
            "id": 33236,
            "nodeType": "VariableDeclaration",
            "src": "508:49:40",
            "nodes": [],
            "constant": true,
            "mutability": "constant",
            "name": "MAX_COLLATERAL",
            "nameLocation": "525:14:40",
            "scope": 33755,
            "stateVariable": true,
            "storageLocation": "default",
            "typeDescriptions": {
              "typeIdentifier": "t_uint256",
              "typeString": "uint256"
            },
            "typeName": {
              "id": 33232,
              "name": "uint256",
              "nodeType": "ElementaryTypeName",
              "src": "508:7:40",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            },
            "value": {
              "commonType": {
                "typeIdentifier": "t_rational_1000000000000_by_1",
                "typeString": "int_const 1000000000000"
              },
              "id": 33235,
              "isConstant": false,
              "isLValue": false,
              "isPure": true,
              "lValueRequested": false,
              "leftExpression": {
                "hexValue": "315f3030305f303030",
                "id": 33233,
                "isConstant": false,
                "isLValue": false,
                "isPure": true,
                "kind": "number",
                "lValueRequested": false,
                "nodeType": "Literal",
                "src": "542:9:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_rational_1000000_by_1",
                  "typeString": "int_const 1000000"
                },
                "value": "1_000_000"
              },
              "nodeType": "BinaryOperation",
              "operator": "*",
              "rightExpression": {
                "hexValue": "316536",
                "id": 33234,
                "isConstant": false,
                "isLValue": false,
                "isPure": true,
                "kind": "number",
                "lValueRequested": false,
                "nodeType": "Literal",
                "src": "554:3:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_rational_1000000_by_1",
                  "typeString": "int_const 1000000"
                },
                "value": "1e6"
              },
              "src": "542:15:40",
              "typeDescriptions": {
                "typeIdentifier": "t_rational_1000000000000_by_1",
                "typeString": "int_const 1000000000000"
              }
            },
            "visibility": "internal"
          },
          {
            "id": 33243,
            "nodeType": "VariableDeclaration",
            "src": "564:33:40",
            "nodes": [],
            "constant": false,
            "mutability": "mutable",
            "name": "fee",
            "nameLocation": "572:3:40",
            "scope": 33755,
            "stateVariable": true,
            "storageLocation": "default",
            "typeDescriptions": {
              "typeIdentifier": "t_uint256",
              "typeString": "uint256"
            },
            "typeName": {
              "id": 33237,
              "name": "uint256",
              "nodeType": "ElementaryTypeName",
              "src": "564:7:40",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            },
            "value": {
              "commonType": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              },
              "id": 33242,
              "isConstant": false,
              "isLValue": false,
              "isPure": true,
              "lValueRequested": false,
              "leftExpression": {
                "commonType": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "id": 33240,
                "isConstant": false,
                "isLValue": false,
                "isPure": true,
                "lValueRequested": false,
                "leftExpression": {
                  "id": 33238,
                  "name": "PRECISION",
                  "nodeType": "Identifier",
                  "overloadedDeclarations": [],
                  "referencedDeclaration": 33216,
                  "src": "578:9:40",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "nodeType": "BinaryOperation",
                "operator": "*",
                "rightExpression": {
                  "hexValue": "31",
                  "id": 33239,
                  "isConstant": false,
                  "isLValue": false,
                  "isPure": true,
                  "kind": "number",
                  "lValueRequested": false,
                  "nodeType": "Literal",
                  "src": "590:1:40",
                  "typeDescriptions": {
                    "typeIdentifier": "t_rational_1_by_1",
                    "typeString": "int_const 1"
                  },
                  "value": "1"
                },
                "src": "578:13:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                }
              },
              "nodeType": "BinaryOperation",
              "operator": "/",
              "rightExpression": {
                "hexValue": "313030",
                "id": 33241,
                "isConstant": false,
                "isLValue": false,
                "isPure": true,
                "kind": "number",
                "lValueRequested": false,
                "nodeType": "Literal",
                "src": "594:3:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_rational_100_by_1",
                  "typeString": "int_const 100"
                },
                "value": "100"
              },
              "src": "578:19:40",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            },
            "visibility": "internal"
          },
          {
            "id": 33245,
            "nodeType": "VariableDeclaration",
            "src": "604:31:40",
            "nodes": [],
            "constant": false,
            "mutability": "mutable",
            "name": "positionCounter",
            "nameLocation": "620:15:40",
            "scope": 33755,
            "stateVariable": true,
            "storageLocation": "default",
            "typeDescriptions": {
              "typeIdentifier": "t_uint256",
              "typeString": "uint256"
            },
            "typeName": {
              "id": 33244,
              "name": "uint256",
              "nodeType": "ElementaryTypeName",
              "src": "604:7:40",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            },
            "visibility": "private"
          },
          {
            "id": 33249,
            "nodeType": "VariableDeclaration",
            "src": "689:35:40",
            "nodes": [],
            "constant": false,
            "documentation": {
              "id": 33246,
              "nodeType": "StructuredDocumentation",
              "src": "642:42:40",
              "text": "@notice The associated liquidity pool."
            },
            "functionSelector": "665a11ca",
            "mutability": "mutable",
            "name": "liquidityPool",
            "nameLocation": "711:13:40",
            "scope": 33755,
            "stateVariable": true,
            "storageLocation": "default",
            "typeDescriptions": {
              "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
              "typeString": "contract ILiquidityPool"
            },
            "typeName": {
              "id": 33248,
              "nodeType": "UserDefinedTypeName",
              "pathNode": {
                "id": 33247,
                "name": "ILiquidityPool",
                "nameLocations": [
                  "689:14:40"
                ],
                "nodeType": "IdentifierPath",
                "referencedDeclaration": 33908,
                "src": "689:14:40"
              },
              "referencedDeclaration": 33908,
              "src": "689:14:40",
              "typeDescriptions": {
                "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                "typeString": "contract ILiquidityPool"
              }
            },
            "visibility": "public"
          },
          {
            "id": 33252,
            "nodeType": "VariableDeclaration",
            "src": "776:23:40",
            "nodes": [],
            "baseFunctions": [
              33963
            ],
            "constant": false,
            "documentation": {
              "id": 33250,
              "nodeType": "StructuredDocumentation",
              "src": "731:40:40",
              "text": "@notice The address of the protocol."
            },
            "functionSelector": "8ce74426",
            "mutability": "mutable",
            "name": "protocol",
            "nameLocation": "791:8:40",
            "scope": 33755,
            "stateVariable": true,
            "storageLocation": "default",
            "typeDescriptions": {
              "typeIdentifier": "t_address",
              "typeString": "address"
            },
            "typeName": {
              "id": 33251,
              "name": "address",
              "nodeType": "ElementaryTypeName",
              "src": "776:7:40",
              "stateMutability": "nonpayable",
              "typeDescriptions": {
                "typeIdentifier": "t_address",
                "typeString": "address"
              }
            },
            "visibility": "public"
          },
          {
            "id": 33257,
            "nodeType": "VariableDeclaration",
            "src": "806:45:40",
            "nodes": [],
            "constant": false,
            "functionSelector": "99fbab88",
            "mutability": "mutable",
            "name": "positions",
            "nameLocation": "842:9:40",
            "scope": 33755,
            "stateVariable": true,
            "storageLocation": "default",
            "typeDescriptions": {
              "typeIdentifier": "t_mapping$_t_uint256_$_t_struct$_Position_$33922_storage_$",
              "typeString": "mapping(uint256 => struct Position)"
            },
            "typeName": {
              "id": 33256,
              "keyName": "",
              "keyNameLocation": "-1:-1:-1",
              "keyType": {
                "id": 33253,
                "name": "uint256",
                "nodeType": "ElementaryTypeName",
                "src": "814:7:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                }
              },
              "nodeType": "Mapping",
              "src": "806:28:40",
              "typeDescriptions": {
                "typeIdentifier": "t_mapping$_t_uint256_$_t_struct$_Position_$33922_storage_$",
                "typeString": "mapping(uint256 => struct Position)"
              },
              "valueName": "",
              "valueNameLocation": "-1:-1:-1",
              "valueType": {
                "id": 33255,
                "nodeType": "UserDefinedTypeName",
                "pathNode": {
                  "id": 33254,
                  "name": "Position",
                  "nameLocations": [
                    "825:8:40"
                  ],
                  "nodeType": "IdentifierPath",
                  "referencedDeclaration": 33922,
                  "src": "825:8:40"
                },
                "referencedDeclaration": 33922,
                "src": "825:8:40",
                "typeDescriptions": {
                  "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                  "typeString": "struct Position"
                }
              }
            },
            "visibility": "public"
          },
          {
            "id": 33261,
            "nodeType": "VariableDeclaration",
            "src": "929:48:40",
            "nodes": [],
            "constant": false,
            "documentation": {
              "id": 33258,
              "nodeType": "StructuredDocumentation",
              "src": "858:66:40",
              "text": "@notice The Chainlink aggregator for fetching the asset price."
            },
            "functionSelector": "5004d36c",
            "mutability": "mutable",
            "name": "chainlinkAggregator",
            "nameLocation": "958:19:40",
            "scope": 33755,
            "stateVariable": true,
            "storageLocation": "default",
            "typeDescriptions": {
              "typeIdentifier": "t_contract$_AggregatorV3Interface_$33801",
              "typeString": "contract AggregatorV3Interface"
            },
            "typeName": {
              "id": 33260,
              "nodeType": "UserDefinedTypeName",
              "pathNode": {
                "id": 33259,
                "name": "AggregatorV3Interface",
                "nameLocations": [
                  "929:21:40"
                ],
                "nodeType": "IdentifierPath",
                "referencedDeclaration": 33801,
                "src": "929:21:40"
              },
              "referencedDeclaration": 33801,
              "src": "929:21:40",
              "typeDescriptions": {
                "typeIdentifier": "t_contract$_AggregatorV3Interface_$33801",
                "typeString": "contract AggregatorV3Interface"
              }
            },
            "visibility": "public"
          },
          {
            "id": 33285,
            "nodeType": "FunctionDefinition",
            "src": "1080:227:40",
            "nodes": [],
            "body": {
              "id": 33284,
              "nodeType": "Block",
              "src": "1172:135:40",
              "nodes": [],
              "statements": [
                {
                  "expression": {
                    "arguments": [
                      {
                        "id": 33273,
                        "name": "liquidityPool_",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33265,
                        "src": "1199:14:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                          "typeString": "contract ILiquidityPool"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                          "typeString": "contract ILiquidityPool"
                        }
                      ],
                      "id": 33272,
                      "name": "setLiquidityPool",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33635,
                      "src": "1182:16:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_internal_nonpayable$_t_contract$_ILiquidityPool_$33908_$returns$__$",
                        "typeString": "function (contract ILiquidityPool)"
                      }
                    },
                    "id": 33274,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1182:32:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33275,
                  "nodeType": "ExpressionStatement",
                  "src": "1182:32:40"
                },
                {
                  "expression": {
                    "arguments": [
                      {
                        "id": 33277,
                        "name": "protocol_",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33267,
                        "src": "1236:9:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      ],
                      "id": 33276,
                      "name": "setProtocol",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33650,
                      "src": "1224:11:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_internal_nonpayable$_t_address_$returns$__$",
                        "typeString": "function (address)"
                      }
                    },
                    "id": 33278,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1224:22:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33279,
                  "nodeType": "ExpressionStatement",
                  "src": "1224:22:40"
                },
                {
                  "expression": {
                    "arguments": [
                      {
                        "id": 33281,
                        "name": "chainlinkAggregator_",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33269,
                        "src": "1279:20:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      ],
                      "id": 33280,
                      "name": "setChainlinkAggregator",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33670,
                      "src": "1256:22:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_internal_nonpayable$_t_address_$returns$__$",
                        "typeString": "function (address)"
                      }
                    },
                    "id": 33282,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1256:44:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33283,
                  "nodeType": "ExpressionStatement",
                  "src": "1256:44:40"
                }
              ]
            },
            "documentation": {
              "id": 33262,
              "nodeType": "StructuredDocumentation",
              "src": "984:91:40",
              "text": "@dev TradePair constructor sets the liquidity pool, protocol, and chainlink aggregator."
            },
            "implemented": true,
            "kind": "constructor",
            "modifiers": [],
            "name": "",
            "nameLocation": "-1:-1:-1",
            "parameters": {
              "id": 33270,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33265,
                  "mutability": "mutable",
                  "name": "liquidityPool_",
                  "nameLocation": "1107:14:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33285,
                  "src": "1092:29:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                    "typeString": "contract ILiquidityPool"
                  },
                  "typeName": {
                    "id": 33264,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 33263,
                      "name": "ILiquidityPool",
                      "nameLocations": [
                        "1092:14:40"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 33908,
                      "src": "1092:14:40"
                    },
                    "referencedDeclaration": 33908,
                    "src": "1092:14:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                      "typeString": "contract ILiquidityPool"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 33267,
                  "mutability": "mutable",
                  "name": "protocol_",
                  "nameLocation": "1131:9:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33285,
                  "src": "1123:17:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  },
                  "typeName": {
                    "id": 33266,
                    "name": "address",
                    "nodeType": "ElementaryTypeName",
                    "src": "1123:7:40",
                    "stateMutability": "nonpayable",
                    "typeDescriptions": {
                      "typeIdentifier": "t_address",
                      "typeString": "address"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 33269,
                  "mutability": "mutable",
                  "name": "chainlinkAggregator_",
                  "nameLocation": "1150:20:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33285,
                  "src": "1142:28:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  },
                  "typeName": {
                    "id": 33268,
                    "name": "address",
                    "nodeType": "ElementaryTypeName",
                    "src": "1142:7:40",
                    "stateMutability": "nonpayable",
                    "typeDescriptions": {
                      "typeIdentifier": "t_address",
                      "typeString": "address"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "1091:80:40"
            },
            "returnParameters": {
              "id": 33271,
              "nodeType": "ParameterList",
              "parameters": [],
              "src": "1172:0:40"
            },
            "scope": 33755,
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "public"
          },
          {
            "id": 33385,
            "nodeType": "FunctionDefinition",
            "src": "1383:1090:40",
            "nodes": [],
            "body": {
              "id": 33384,
              "nodeType": "Block",
              "src": "1465:1008:40",
              "nodes": [],
              "statements": [
                {
                  "expression": {
                    "arguments": [
                      {
                        "commonType": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        },
                        "id": 33302,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "leftExpression": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 33298,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "id": 33296,
                            "name": "leverage",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33290,
                            "src": "1483:8:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": ">=",
                          "rightExpression": {
                            "id": 33297,
                            "name": "MIN_LEVERAGE",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33226,
                            "src": "1495:12:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "1483:24:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "nodeType": "BinaryOperation",
                        "operator": "&&",
                        "rightExpression": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 33301,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "id": 33299,
                            "name": "leverage",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33290,
                            "src": "1511:8:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": "<=",
                          "rightExpression": {
                            "id": 33300,
                            "name": "MAX_LEVERAGE",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33221,
                            "src": "1523:12:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "1511:24:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "src": "1483:52:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      {
                        "hexValue": "5472616465506169723a3a6f70656e506f736974696f6e3a20496e76616c6964206c657665726167652e",
                        "id": 33303,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "kind": "string",
                        "lValueRequested": false,
                        "nodeType": "Literal",
                        "src": "1537:44:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_stringliteral_ebb7f8cedddea2d0d6cd098744a2a0597c7ac96f8b440d9cea6bb495390f5ed3",
                          "typeString": "literal_string \"TradePair::openPosition: Invalid leverage.\""
                        },
                        "value": "TradePair::openPosition: Invalid leverage."
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        },
                        {
                          "typeIdentifier": "t_stringliteral_ebb7f8cedddea2d0d6cd098744a2a0597c7ac96f8b440d9cea6bb495390f5ed3",
                          "typeString": "literal_string \"TradePair::openPosition: Invalid leverage.\""
                        }
                      ],
                      "id": 33295,
                      "name": "require",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [
                        -18,
                        -18
                      ],
                      "referencedDeclaration": -18,
                      "src": "1475:7:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",
                        "typeString": "function (bool,string memory) pure"
                      }
                    },
                    "id": 33304,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1475:107:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33305,
                  "nodeType": "ExpressionStatement",
                  "src": "1475:107:40"
                },
                {
                  "expression": {
                    "arguments": [
                      {
                        "commonType": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        },
                        "id": 33313,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "leftExpression": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 33309,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "id": 33307,
                            "name": "collateral",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33288,
                            "src": "1613:10:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": ">=",
                          "rightExpression": {
                            "id": 33308,
                            "name": "MIN_COLLATERAL",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33231,
                            "src": "1627:14:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "1613:28:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "nodeType": "BinaryOperation",
                        "operator": "&&",
                        "rightExpression": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 33312,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "id": 33310,
                            "name": "collateral",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33288,
                            "src": "1645:10:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": "<=",
                          "rightExpression": {
                            "id": 33311,
                            "name": "MAX_COLLATERAL",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33236,
                            "src": "1659:14:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "1645:28:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "src": "1613:60:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      {
                        "hexValue": "5472616465506169723a3a6f70656e506f736974696f6e3a20496e76616c696420636f6c6c61746572616c2e",
                        "id": 33314,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "kind": "string",
                        "lValueRequested": false,
                        "nodeType": "Literal",
                        "src": "1675:46:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_stringliteral_8160517218f794398a54bb53f7fba435910c25b3d344a3f38ad5c4212a0bf7f2",
                          "typeString": "literal_string \"TradePair::openPosition: Invalid collateral.\""
                        },
                        "value": "TradePair::openPosition: Invalid collateral."
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        },
                        {
                          "typeIdentifier": "t_stringliteral_8160517218f794398a54bb53f7fba435910c25b3d344a3f38ad5c4212a0bf7f2",
                          "typeString": "literal_string \"TradePair::openPosition: Invalid collateral.\""
                        }
                      ],
                      "id": 33306,
                      "name": "require",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [
                        -18,
                        -18
                      ],
                      "referencedDeclaration": -18,
                      "src": "1592:7:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",
                        "typeString": "function (bool,string memory) pure"
                      }
                    },
                    "id": 33315,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1592:139:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33316,
                  "nodeType": "ExpressionStatement",
                  "src": "1592:139:40"
                },
                {
                  "assignments": [
                    33318
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 33318,
                      "mutability": "mutable",
                      "name": "entryPrice",
                      "nameLocation": "1750:10:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33384,
                      "src": "1742:18:40",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 33317,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "1742:7:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 33321,
                  "initialValue": {
                    "arguments": [],
                    "expression": {
                      "argumentTypes": [],
                      "id": 33319,
                      "name": "_getCurrentPrice",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33695,
                      "src": "1763:16:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_internal_view$__$returns$_t_uint256_$",
                        "typeString": "function () view returns (uint256)"
                      }
                    },
                    "id": 33320,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1763:18:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "nodeType": "VariableDeclarationStatement",
                  "src": "1742:39:40"
                },
                {
                  "assignments": [
                    33323,
                    33325
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 33323,
                      "mutability": "mutable",
                      "name": "liquidationPrice",
                      "nameLocation": "1800:16:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33384,
                      "src": "1792:24:40",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 33322,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "1792:7:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    },
                    {
                      "constant": false,
                      "id": 33325,
                      "mutability": "mutable",
                      "name": "takeProfitPrice",
                      "nameLocation": "1826:15:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33384,
                      "src": "1818:23:40",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 33324,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "1818:7:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 33331,
                  "initialValue": {
                    "arguments": [
                      {
                        "id": 33327,
                        "name": "entryPrice",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33318,
                        "src": "1868:10:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "id": 33328,
                        "name": "leverage",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33290,
                        "src": "1880:8:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "id": 33329,
                        "name": "isLong",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33292,
                        "src": "1890:6:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      ],
                      "id": 33326,
                      "name": "_calculatePriceTargets",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33754,
                      "src": "1845:22:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$_t_uint256_$",
                        "typeString": "function (uint256,uint256,bool) pure returns (uint256,uint256)"
                      }
                    },
                    "id": 33330,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1845:52:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$_t_uint256_$_t_uint256_$",
                      "typeString": "tuple(uint256,uint256)"
                    }
                  },
                  "nodeType": "VariableDeclarationStatement",
                  "src": "1791:106:40"
                },
                {
                  "assignments": [
                    33333
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 33333,
                      "mutability": "mutable",
                      "name": "openDate",
                      "nameLocation": "1915:8:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33384,
                      "src": "1907:16:40",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 33332,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "1907:7:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 33336,
                  "initialValue": {
                    "expression": {
                      "id": 33334,
                      "name": "block",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": -4,
                      "src": "1926:5:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_magic_block",
                        "typeString": "block"
                      }
                    },
                    "id": 33335,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "memberLocation": "1932:9:40",
                    "memberName": "timestamp",
                    "nodeType": "MemberAccess",
                    "src": "1926:15:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "nodeType": "VariableDeclarationStatement",
                  "src": "1907:34:40"
                },
                {
                  "assignments": [
                    33338
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 33338,
                      "mutability": "mutable",
                      "name": "shares",
                      "nameLocation": "1960:6:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33384,
                      "src": "1952:14:40",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 33337,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "1952:7:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 33347,
                  "initialValue": {
                    "arguments": [
                      {
                        "expression": {
                          "id": 33343,
                          "name": "msg",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": -15,
                          "src": "2017:3:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_magic_message",
                            "typeString": "msg"
                          }
                        },
                        "id": 33344,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "2021:6:40",
                        "memberName": "sender",
                        "nodeType": "MemberAccess",
                        "src": "2017:10:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      },
                      {
                        "id": 33345,
                        "name": "collateral",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33288,
                        "src": "2029:10:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      ],
                      "expression": {
                        "arguments": [
                          {
                            "id": 33340,
                            "name": "liquidityPool",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33249,
                            "src": "1984:13:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                              "typeString": "contract ILiquidityPool"
                            }
                          }
                        ],
                        "expression": {
                          "argumentTypes": [
                            {
                              "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                              "typeString": "contract ILiquidityPool"
                            }
                          ],
                          "id": 33339,
                          "name": "ILiquidityPool",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 33908,
                          "src": "1969:14:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_type$_t_contract$_ILiquidityPool_$33908_$",
                            "typeString": "type(contract ILiquidityPool)"
                          }
                        },
                        "id": 33341,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "kind": "typeConversion",
                        "lValueRequested": false,
                        "nameLocations": [],
                        "names": [],
                        "nodeType": "FunctionCall",
                        "src": "1969:29:40",
                        "tryCall": false,
                        "typeDescriptions": {
                          "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                          "typeString": "contract ILiquidityPool"
                        }
                      },
                      "id": 33342,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "memberLocation": "1999:17:40",
                      "memberName": "depositCollateral",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 33839,
                      "src": "1969:47:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_uint256_$",
                        "typeString": "function (address,uint256) external returns (uint256)"
                      }
                    },
                    "id": 33346,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1969:71:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "nodeType": "VariableDeclarationStatement",
                  "src": "1952:88:40"
                },
                {
                  "expression": {
                    "id": 33349,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "nodeType": "UnaryOperation",
                    "operator": "++",
                    "prefix": false,
                    "src": "2051:17:40",
                    "subExpression": {
                      "id": 33348,
                      "name": "positionCounter",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33245,
                      "src": "2051:15:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "id": 33350,
                  "nodeType": "ExpressionStatement",
                  "src": "2051:17:40"
                },
                {
                  "expression": {
                    "id": 33368,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "baseExpression": {
                        "id": 33351,
                        "name": "positions",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33257,
                        "src": "2078:9:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_mapping$_t_uint256_$_t_struct$_Position_$33922_storage_$",
                          "typeString": "mapping(uint256 => struct Position storage ref)"
                        }
                      },
                      "id": 33353,
                      "indexExpression": {
                        "id": 33352,
                        "name": "positionCounter",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33245,
                        "src": "2088:15:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "isConstant": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "nodeType": "IndexAccess",
                      "src": "2078:26:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_struct$_Position_$33922_storage",
                        "typeString": "struct Position storage ref"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "arguments": [
                        {
                          "expression": {
                            "id": 33355,
                            "name": "msg",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": -15,
                            "src": "2116:3:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_magic_message",
                              "typeString": "msg"
                            }
                          },
                          "id": 33356,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "memberLocation": "2120:6:40",
                          "memberName": "sender",
                          "nodeType": "MemberAccess",
                          "src": "2116:10:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_address",
                            "typeString": "address"
                          }
                        },
                        {
                          "arguments": [
                            {
                              "id": 33359,
                              "name": "shares",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33338,
                              "src": "2136:6:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            ],
                            "id": 33358,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "lValueRequested": false,
                            "nodeType": "ElementaryTypeNameExpression",
                            "src": "2128:7:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_uint128_$",
                              "typeString": "type(uint128)"
                            },
                            "typeName": {
                              "id": 33357,
                              "name": "uint128",
                              "nodeType": "ElementaryTypeName",
                              "src": "2128:7:40",
                              "typeDescriptions": {}
                            }
                          },
                          "id": 33360,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "2128:15:40",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint128",
                            "typeString": "uint128"
                          }
                        },
                        {
                          "arguments": [
                            {
                              "id": 33363,
                              "name": "leverage",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33290,
                              "src": "2152:8:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            ],
                            "id": 33362,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "lValueRequested": false,
                            "nodeType": "ElementaryTypeNameExpression",
                            "src": "2145:6:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_uint32_$",
                              "typeString": "type(uint32)"
                            },
                            "typeName": {
                              "id": 33361,
                              "name": "uint32",
                              "nodeType": "ElementaryTypeName",
                              "src": "2145:6:40",
                              "typeDescriptions": {}
                            }
                          },
                          "id": 33364,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "2145:16:40",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint32",
                            "typeString": "uint32"
                          }
                        },
                        {
                          "id": 33365,
                          "name": "isLong",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 33292,
                          "src": "2163:6:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        {
                          "id": 33366,
                          "name": "entryPrice",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 33318,
                          "src": "2171:10:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        }
                      ],
                      "expression": {
                        "argumentTypes": [
                          {
                            "typeIdentifier": "t_address",
                            "typeString": "address"
                          },
                          {
                            "typeIdentifier": "t_uint128",
                            "typeString": "uint128"
                          },
                          {
                            "typeIdentifier": "t_uint32",
                            "typeString": "uint32"
                          },
                          {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          },
                          {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        ],
                        "id": 33354,
                        "name": "Position",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33922,
                        "src": "2107:8:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_type$_t_struct$_Position_$33922_storage_ptr_$",
                          "typeString": "type(struct Position storage pointer)"
                        }
                      },
                      "id": 33367,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "kind": "structConstructorCall",
                      "lValueRequested": false,
                      "nameLocations": [],
                      "names": [],
                      "nodeType": "FunctionCall",
                      "src": "2107:75:40",
                      "tryCall": false,
                      "typeDescriptions": {
                        "typeIdentifier": "t_struct$_Position_$33922_memory_ptr",
                        "typeString": "struct Position memory"
                      }
                    },
                    "src": "2078:104:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_Position_$33922_storage",
                      "typeString": "struct Position storage ref"
                    }
                  },
                  "id": 33369,
                  "nodeType": "ExpressionStatement",
                  "src": "2078:104:40"
                },
                {
                  "eventCall": {
                    "arguments": [
                      {
                        "expression": {
                          "id": 33371,
                          "name": "msg",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": -15,
                          "src": "2226:3:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_magic_message",
                            "typeString": "msg"
                          }
                        },
                        "id": 33372,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "2230:6:40",
                        "memberName": "sender",
                        "nodeType": "MemberAccess",
                        "src": "2226:10:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      },
                      {
                        "id": 33373,
                        "name": "positionCounter",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33245,
                        "src": "2250:15:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "id": 33374,
                        "name": "collateral",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33288,
                        "src": "2279:10:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "id": 33375,
                        "name": "shares",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33338,
                        "src": "2303:6:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "id": 33376,
                        "name": "leverage",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33290,
                        "src": "2323:8:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "id": 33377,
                        "name": "isLong",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33292,
                        "src": "2345:6:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      {
                        "id": 33378,
                        "name": "entryPrice",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33318,
                        "src": "2365:10:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "id": 33379,
                        "name": "liquidationPrice",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33323,
                        "src": "2389:16:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "id": 33380,
                        "name": "takeProfitPrice",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33325,
                        "src": "2419:15:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "id": 33381,
                        "name": "openDate",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33333,
                        "src": "2448:8:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      ],
                      "id": 33370,
                      "name": "PositionOpened",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33985,
                      "src": "2198:14:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_event_nonpayable$_t_address_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$__$",
                        "typeString": "function (address,uint256,uint256,uint256,uint256,bool,uint256,uint256,uint256,uint256)"
                      }
                    },
                    "id": 33382,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "2198:268:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33383,
                  "nodeType": "EmitStatement",
                  "src": "2193:273:40"
                }
              ]
            },
            "baseFunctions": [
              33931
            ],
            "documentation": {
              "id": 33286,
              "nodeType": "StructuredDocumentation",
              "src": "1313:65:40",
              "text": "@notice Allows a trader to open a leveraged trading position."
            },
            "functionSelector": "1558c966",
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "openPosition",
            "nameLocation": "1392:12:40",
            "parameters": {
              "id": 33293,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33288,
                  "mutability": "mutable",
                  "name": "collateral",
                  "nameLocation": "1413:10:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33385,
                  "src": "1405:18:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 33287,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "1405:7:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 33290,
                  "mutability": "mutable",
                  "name": "leverage",
                  "nameLocation": "1433:8:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33385,
                  "src": "1425:16:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 33289,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "1425:7:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 33292,
                  "mutability": "mutable",
                  "name": "isLong",
                  "nameLocation": "1448:6:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33385,
                  "src": "1443:11:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bool",
                    "typeString": "bool"
                  },
                  "typeName": {
                    "id": 33291,
                    "name": "bool",
                    "nodeType": "ElementaryTypeName",
                    "src": "1443:4:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "1404:51:40"
            },
            "returnParameters": {
              "id": 33294,
              "nodeType": "ParameterList",
              "parameters": [],
              "src": "1465:0:40"
            },
            "scope": 33755,
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "external"
          },
          {
            "id": 33403,
            "nodeType": "FunctionDefinition",
            "src": "2587:191:40",
            "nodes": [],
            "body": {
              "id": 33402,
              "nodeType": "Block",
              "src": "2639:139:40",
              "nodes": [],
              "statements": [
                {
                  "assignments": [
                    33392
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 33392,
                      "mutability": "mutable",
                      "name": "success",
                      "nameLocation": "2654:7:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33402,
                      "src": "2649:12:40",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      },
                      "typeName": {
                        "id": 33391,
                        "name": "bool",
                        "nodeType": "ElementaryTypeName",
                        "src": "2649:4:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 33396,
                  "initialValue": {
                    "arguments": [
                      {
                        "id": 33394,
                        "name": "positionId",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33388,
                        "src": "2679:10:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      ],
                      "id": 33393,
                      "name": "_closePosition",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33589,
                      "src": "2664:14:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_internal_nonpayable$_t_uint256_$returns$_t_bool_$",
                        "typeString": "function (uint256) returns (bool)"
                      }
                    },
                    "id": 33395,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "2664:26:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "nodeType": "VariableDeclarationStatement",
                  "src": "2649:41:40"
                },
                {
                  "expression": {
                    "arguments": [
                      {
                        "id": 33398,
                        "name": "success",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33392,
                        "src": "2708:7:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      {
                        "hexValue": "5472616465506169723a3a636c6f7365506f736974696f6e3a20506f736974696f6e206973206e6f7420636c6f7361626c652e",
                        "id": 33399,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "kind": "string",
                        "lValueRequested": false,
                        "nodeType": "Literal",
                        "src": "2717:53:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_stringliteral_0bf6131df6ef9a1bd9b0bffb0c5b8c47e69a679bb48bbf10070796bd85b8b0cb",
                          "typeString": "literal_string \"TradePair::closePosition: Position is not closable.\""
                        },
                        "value": "TradePair::closePosition: Position is not closable."
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        },
                        {
                          "typeIdentifier": "t_stringliteral_0bf6131df6ef9a1bd9b0bffb0c5b8c47e69a679bb48bbf10070796bd85b8b0cb",
                          "typeString": "literal_string \"TradePair::closePosition: Position is not closable.\""
                        }
                      ],
                      "id": 33397,
                      "name": "require",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [
                        -18,
                        -18
                      ],
                      "referencedDeclaration": -18,
                      "src": "2700:7:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",
                        "typeString": "function (bool,string memory) pure"
                      }
                    },
                    "id": 33400,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "2700:71:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33401,
                  "nodeType": "ExpressionStatement",
                  "src": "2700:71:40"
                }
              ]
            },
            "baseFunctions": [
              33936
            ],
            "documentation": {
              "id": 33386,
              "nodeType": "StructuredDocumentation",
              "src": "2479:103:40",
              "text": "@notice Allows a trader to close a trading position if it's either 100% in profit or -100% in loss."
            },
            "functionSelector": "a126d601",
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "closePosition",
            "nameLocation": "2596:13:40",
            "parameters": {
              "id": 33389,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33388,
                  "mutability": "mutable",
                  "name": "positionId",
                  "nameLocation": "2618:10:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33403,
                  "src": "2610:18:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 33387,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "2610:7:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "2609:20:40"
            },
            "returnParameters": {
              "id": 33390,
              "nodeType": "ParameterList",
              "parameters": [],
              "src": "2639:0:40"
            },
            "scope": 33755,
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "external"
          },
          {
            "id": 33589,
            "nodeType": "FunctionDefinition",
            "src": "2844:1639:40",
            "nodes": [],
            "body": {
              "id": 33588,
              "nodeType": "Block",
              "src": "2920:1563:40",
              "nodes": [],
              "statements": [
                {
                  "assignments": [
                    33413
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 33413,
                      "mutability": "mutable",
                      "name": "position",
                      "nameLocation": "2947:8:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33588,
                      "src": "2930:25:40",
                      "stateVariable": false,
                      "storageLocation": "storage",
                      "typeDescriptions": {
                        "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                        "typeString": "struct Position"
                      },
                      "typeName": {
                        "id": 33412,
                        "nodeType": "UserDefinedTypeName",
                        "pathNode": {
                          "id": 33411,
                          "name": "Position",
                          "nameLocations": [
                            "2930:8:40"
                          ],
                          "nodeType": "IdentifierPath",
                          "referencedDeclaration": 33922,
                          "src": "2930:8:40"
                        },
                        "referencedDeclaration": 33922,
                        "src": "2930:8:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                          "typeString": "struct Position"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 33417,
                  "initialValue": {
                    "baseExpression": {
                      "id": 33414,
                      "name": "positions",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33257,
                      "src": "2958:9:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_mapping$_t_uint256_$_t_struct$_Position_$33922_storage_$",
                        "typeString": "mapping(uint256 => struct Position storage ref)"
                      }
                    },
                    "id": 33416,
                    "indexExpression": {
                      "id": 33415,
                      "name": "positionId",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33406,
                      "src": "2968:10:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "isConstant": false,
                    "isLValue": true,
                    "isPure": false,
                    "lValueRequested": false,
                    "nodeType": "IndexAccess",
                    "src": "2958:21:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_Position_$33922_storage",
                      "typeString": "struct Position storage ref"
                    }
                  },
                  "nodeType": "VariableDeclarationStatement",
                  "src": "2930:49:40"
                },
                {
                  "condition": {
                    "commonType": {
                      "typeIdentifier": "t_address",
                      "typeString": "address"
                    },
                    "id": 33424,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftExpression": {
                      "expression": {
                        "id": 33418,
                        "name": "position",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33413,
                        "src": "2994:8:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                          "typeString": "struct Position storage pointer"
                        }
                      },
                      "id": 33419,
                      "isConstant": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": false,
                      "memberLocation": "3003:6:40",
                      "memberName": "trader",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 33913,
                      "src": "2994:15:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_address",
                        "typeString": "address"
                      }
                    },
                    "nodeType": "BinaryOperation",
                    "operator": "==",
                    "rightExpression": {
                      "arguments": [
                        {
                          "hexValue": "30",
                          "id": 33422,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": true,
                          "kind": "number",
                          "lValueRequested": false,
                          "nodeType": "Literal",
                          "src": "3021:1:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_rational_0_by_1",
                            "typeString": "int_const 0"
                          },
                          "value": "0"
                        }
                      ],
                      "expression": {
                        "argumentTypes": [
                          {
                            "typeIdentifier": "t_rational_0_by_1",
                            "typeString": "int_const 0"
                          }
                        ],
                        "id": 33421,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "lValueRequested": false,
                        "nodeType": "ElementaryTypeNameExpression",
                        "src": "3013:7:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_type$_t_address_$",
                          "typeString": "type(address)"
                        },
                        "typeName": {
                          "id": 33420,
                          "name": "address",
                          "nodeType": "ElementaryTypeName",
                          "src": "3013:7:40",
                          "typeDescriptions": {}
                        }
                      },
                      "id": 33423,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": true,
                      "kind": "typeConversion",
                      "lValueRequested": false,
                      "nameLocations": [],
                      "names": [],
                      "nodeType": "FunctionCall",
                      "src": "3013:10:40",
                      "tryCall": false,
                      "typeDescriptions": {
                        "typeIdentifier": "t_address",
                        "typeString": "address"
                      }
                    },
                    "src": "2994:29:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "id": 33428,
                  "nodeType": "IfStatement",
                  "src": "2990:106:40",
                  "trueBody": {
                    "id": 33427,
                    "nodeType": "Block",
                    "src": "3025:71:40",
                    "statements": [
                      {
                        "expression": {
                          "hexValue": "66616c7365",
                          "id": 33425,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": true,
                          "kind": "bool",
                          "lValueRequested": false,
                          "nodeType": "Literal",
                          "src": "3080:5:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          },
                          "value": "false"
                        },
                        "functionReturnParameters": 33410,
                        "id": 33426,
                        "nodeType": "Return",
                        "src": "3073:12:40"
                      }
                    ]
                  }
                },
                {
                  "assignments": [
                    33430
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 33430,
                      "mutability": "mutable",
                      "name": "closePrice",
                      "nameLocation": "3114:10:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33588,
                      "src": "3106:18:40",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 33429,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "3106:7:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 33433,
                  "initialValue": {
                    "arguments": [],
                    "expression": {
                      "argumentTypes": [],
                      "id": 33431,
                      "name": "_getCurrentPrice",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33695,
                      "src": "3127:16:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_internal_view$__$returns$_t_uint256_$",
                        "typeString": "function () view returns (uint256)"
                      }
                    },
                    "id": 33432,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "3127:18:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "nodeType": "VariableDeclarationStatement",
                  "src": "3106:39:40"
                },
                {
                  "assignments": [
                    33435
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 33435,
                      "mutability": "mutable",
                      "name": "pnl",
                      "nameLocation": "3162:3:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33588,
                      "src": "3155:10:40",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_int128",
                        "typeString": "int128"
                      },
                      "typeName": {
                        "id": 33434,
                        "name": "int128",
                        "nodeType": "ElementaryTypeName",
                        "src": "3155:6:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int128",
                          "typeString": "int128"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 33436,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "3155:10:40"
                },
                {
                  "assignments": [
                    33438,
                    33440
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 33438,
                      "mutability": "mutable",
                      "name": "liquidationPrice",
                      "nameLocation": "3185:16:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33588,
                      "src": "3177:24:40",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 33437,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "3177:7:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    },
                    {
                      "constant": false,
                      "id": 33440,
                      "mutability": "mutable",
                      "name": "takeProfitPrice",
                      "nameLocation": "3211:15:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33588,
                      "src": "3203:23:40",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 33439,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "3203:7:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 33449,
                  "initialValue": {
                    "arguments": [
                      {
                        "expression": {
                          "id": 33442,
                          "name": "position",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 33413,
                          "src": "3265:8:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                            "typeString": "struct Position storage pointer"
                          }
                        },
                        "id": 33443,
                        "isConstant": false,
                        "isLValue": true,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "3274:10:40",
                        "memberName": "entryPrice",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 33921,
                        "src": "3265:19:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "expression": {
                          "id": 33444,
                          "name": "position",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 33413,
                          "src": "3286:8:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                            "typeString": "struct Position storage pointer"
                          }
                        },
                        "id": 33445,
                        "isConstant": false,
                        "isLValue": true,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "3295:8:40",
                        "memberName": "leverage",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 33917,
                        "src": "3286:17:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint32",
                          "typeString": "uint32"
                        }
                      },
                      {
                        "expression": {
                          "id": 33446,
                          "name": "position",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 33413,
                          "src": "3305:8:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                            "typeString": "struct Position storage pointer"
                          }
                        },
                        "id": 33447,
                        "isConstant": false,
                        "isLValue": true,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "3314:6:40",
                        "memberName": "isLong",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 33919,
                        "src": "3305:15:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_uint32",
                          "typeString": "uint32"
                        },
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      ],
                      "id": 33441,
                      "name": "_calculatePriceTargets",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33754,
                      "src": "3242:22:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$_t_uint256_$",
                        "typeString": "function (uint256,uint256,bool) pure returns (uint256,uint256)"
                      }
                    },
                    "id": 33448,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "3242:79:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$_t_uint256_$_t_uint256_$",
                      "typeString": "tuple(uint256,uint256)"
                    }
                  },
                  "nodeType": "VariableDeclarationStatement",
                  "src": "3176:145:40"
                },
                {
                  "condition": {
                    "expression": {
                      "id": 33450,
                      "name": "position",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33413,
                      "src": "3336:8:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                        "typeString": "struct Position storage pointer"
                      }
                    },
                    "id": 33451,
                    "isConstant": false,
                    "isLValue": true,
                    "isPure": false,
                    "lValueRequested": false,
                    "memberLocation": "3345:6:40",
                    "memberName": "isLong",
                    "nodeType": "MemberAccess",
                    "referencedDeclaration": 33919,
                    "src": "3336:15:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "falseBody": {
                    "id": 33513,
                    "nodeType": "Block",
                    "src": "3636:277:40",
                    "statements": [
                      {
                        "condition": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 33485,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "id": 33483,
                            "name": "closePrice",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33430,
                            "src": "3654:10:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": "<=",
                          "rightExpression": {
                            "id": 33484,
                            "name": "takeProfitPrice",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33440,
                            "src": "3668:15:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "3654:29:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "falseBody": {
                          "condition": {
                            "commonType": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            },
                            "id": 33497,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "leftExpression": {
                              "id": 33495,
                              "name": "closePrice",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33430,
                              "src": "3757:10:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "nodeType": "BinaryOperation",
                            "operator": ">=",
                            "rightExpression": {
                              "id": 33496,
                              "name": "liquidationPrice",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33438,
                              "src": "3771:16:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "src": "3757:30:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bool",
                              "typeString": "bool"
                            }
                          },
                          "falseBody": {
                            "id": 33510,
                            "nodeType": "Block",
                            "src": "3858:45:40",
                            "statements": [
                              {
                                "expression": {
                                  "hexValue": "66616c7365",
                                  "id": 33508,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "kind": "bool",
                                  "lValueRequested": false,
                                  "nodeType": "Literal",
                                  "src": "3883:5:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bool",
                                    "typeString": "bool"
                                  },
                                  "value": "false"
                                },
                                "functionReturnParameters": 33410,
                                "id": 33509,
                                "nodeType": "Return",
                                "src": "3876:12:40"
                              }
                            ]
                          },
                          "id": 33511,
                          "nodeType": "IfStatement",
                          "src": "3753:150:40",
                          "trueBody": {
                            "id": 33507,
                            "nodeType": "Block",
                            "src": "3789:63:40",
                            "statements": [
                              {
                                "expression": {
                                  "id": 33505,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "leftHandSide": {
                                    "id": 33498,
                                    "name": "pnl",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 33435,
                                    "src": "3807:3:40",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_int128",
                                      "typeString": "int128"
                                    }
                                  },
                                  "nodeType": "Assignment",
                                  "operator": "=",
                                  "rightHandSide": {
                                    "id": 33504,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "nodeType": "UnaryOperation",
                                    "operator": "-",
                                    "prefix": true,
                                    "src": "3813:24:40",
                                    "subExpression": {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 33501,
                                            "name": "position",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": 33413,
                                            "src": "3821:8:40",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                                              "typeString": "struct Position storage pointer"
                                            }
                                          },
                                          "id": 33502,
                                          "isConstant": false,
                                          "isLValue": true,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "3830:6:40",
                                          "memberName": "shares",
                                          "nodeType": "MemberAccess",
                                          "referencedDeclaration": 33915,
                                          "src": "3821:15:40",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_uint128",
                                            "typeString": "uint128"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_uint128",
                                            "typeString": "uint128"
                                          }
                                        ],
                                        "id": 33500,
                                        "isConstant": false,
                                        "isLValue": false,
                                        "isPure": true,
                                        "lValueRequested": false,
                                        "nodeType": "ElementaryTypeNameExpression",
                                        "src": "3814:6:40",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_int128_$",
                                          "typeString": "type(int128)"
                                        },
                                        "typeName": {
                                          "id": 33499,
                                          "name": "int128",
                                          "nodeType": "ElementaryTypeName",
                                          "src": "3814:6:40",
                                          "typeDescriptions": {}
                                        }
                                      },
                                      "id": 33503,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "3814:23:40",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_int128",
                                        "typeString": "int128"
                                      }
                                    },
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_int128",
                                      "typeString": "int128"
                                    }
                                  },
                                  "src": "3807:30:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_int128",
                                    "typeString": "int128"
                                  }
                                },
                                "id": 33506,
                                "nodeType": "ExpressionStatement",
                                "src": "3807:30:40"
                              }
                            ]
                          }
                        },
                        "id": 33512,
                        "nodeType": "IfStatement",
                        "src": "3650:253:40",
                        "trueBody": {
                          "id": 33494,
                          "nodeType": "Block",
                          "src": "3685:62:40",
                          "statements": [
                            {
                              "expression": {
                                "id": 33492,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftHandSide": {
                                  "id": 33486,
                                  "name": "pnl",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 33435,
                                  "src": "3703:3:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_int128",
                                    "typeString": "int128"
                                  }
                                },
                                "nodeType": "Assignment",
                                "operator": "=",
                                "rightHandSide": {
                                  "arguments": [
                                    {
                                      "expression": {
                                        "id": 33489,
                                        "name": "position",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 33413,
                                        "src": "3716:8:40",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                                          "typeString": "struct Position storage pointer"
                                        }
                                      },
                                      "id": 33490,
                                      "isConstant": false,
                                      "isLValue": true,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "memberLocation": "3725:6:40",
                                      "memberName": "shares",
                                      "nodeType": "MemberAccess",
                                      "referencedDeclaration": 33915,
                                      "src": "3716:15:40",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_uint128",
                                        "typeString": "uint128"
                                      }
                                    }
                                  ],
                                  "expression": {
                                    "argumentTypes": [
                                      {
                                        "typeIdentifier": "t_uint128",
                                        "typeString": "uint128"
                                      }
                                    ],
                                    "id": 33488,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": true,
                                    "lValueRequested": false,
                                    "nodeType": "ElementaryTypeNameExpression",
                                    "src": "3709:6:40",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_type$_t_int128_$",
                                      "typeString": "type(int128)"
                                    },
                                    "typeName": {
                                      "id": 33487,
                                      "name": "int128",
                                      "nodeType": "ElementaryTypeName",
                                      "src": "3709:6:40",
                                      "typeDescriptions": {}
                                    }
                                  },
                                  "id": 33491,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "kind": "typeConversion",
                                  "lValueRequested": false,
                                  "nameLocations": [],
                                  "names": [],
                                  "nodeType": "FunctionCall",
                                  "src": "3709:23:40",
                                  "tryCall": false,
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_int128",
                                    "typeString": "int128"
                                  }
                                },
                                "src": "3703:29:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_int128",
                                  "typeString": "int128"
                                }
                              },
                              "id": 33493,
                              "nodeType": "ExpressionStatement",
                              "src": "3703:29:40"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "id": 33514,
                  "nodeType": "IfStatement",
                  "src": "3332:581:40",
                  "trueBody": {
                    "id": 33482,
                    "nodeType": "Block",
                    "src": "3353:277:40",
                    "statements": [
                      {
                        "condition": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 33454,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "id": 33452,
                            "name": "closePrice",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33430,
                            "src": "3371:10:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": ">=",
                          "rightExpression": {
                            "id": 33453,
                            "name": "takeProfitPrice",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33440,
                            "src": "3385:15:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "3371:29:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "falseBody": {
                          "condition": {
                            "commonType": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            },
                            "id": 33466,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "leftExpression": {
                              "id": 33464,
                              "name": "closePrice",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33430,
                              "src": "3474:10:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "nodeType": "BinaryOperation",
                            "operator": "<=",
                            "rightExpression": {
                              "id": 33465,
                              "name": "liquidationPrice",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33438,
                              "src": "3488:16:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "src": "3474:30:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bool",
                              "typeString": "bool"
                            }
                          },
                          "falseBody": {
                            "id": 33479,
                            "nodeType": "Block",
                            "src": "3575:45:40",
                            "statements": [
                              {
                                "expression": {
                                  "hexValue": "66616c7365",
                                  "id": 33477,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "kind": "bool",
                                  "lValueRequested": false,
                                  "nodeType": "Literal",
                                  "src": "3600:5:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bool",
                                    "typeString": "bool"
                                  },
                                  "value": "false"
                                },
                                "functionReturnParameters": 33410,
                                "id": 33478,
                                "nodeType": "Return",
                                "src": "3593:12:40"
                              }
                            ]
                          },
                          "id": 33480,
                          "nodeType": "IfStatement",
                          "src": "3470:150:40",
                          "trueBody": {
                            "id": 33476,
                            "nodeType": "Block",
                            "src": "3506:63:40",
                            "statements": [
                              {
                                "expression": {
                                  "id": 33474,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "leftHandSide": {
                                    "id": 33467,
                                    "name": "pnl",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 33435,
                                    "src": "3524:3:40",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_int128",
                                      "typeString": "int128"
                                    }
                                  },
                                  "nodeType": "Assignment",
                                  "operator": "=",
                                  "rightHandSide": {
                                    "id": 33473,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "nodeType": "UnaryOperation",
                                    "operator": "-",
                                    "prefix": true,
                                    "src": "3530:24:40",
                                    "subExpression": {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 33470,
                                            "name": "position",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": 33413,
                                            "src": "3538:8:40",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                                              "typeString": "struct Position storage pointer"
                                            }
                                          },
                                          "id": 33471,
                                          "isConstant": false,
                                          "isLValue": true,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "3547:6:40",
                                          "memberName": "shares",
                                          "nodeType": "MemberAccess",
                                          "referencedDeclaration": 33915,
                                          "src": "3538:15:40",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_uint128",
                                            "typeString": "uint128"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_uint128",
                                            "typeString": "uint128"
                                          }
                                        ],
                                        "id": 33469,
                                        "isConstant": false,
                                        "isLValue": false,
                                        "isPure": true,
                                        "lValueRequested": false,
                                        "nodeType": "ElementaryTypeNameExpression",
                                        "src": "3531:6:40",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_int128_$",
                                          "typeString": "type(int128)"
                                        },
                                        "typeName": {
                                          "id": 33468,
                                          "name": "int128",
                                          "nodeType": "ElementaryTypeName",
                                          "src": "3531:6:40",
                                          "typeDescriptions": {}
                                        }
                                      },
                                      "id": 33472,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "3531:23:40",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_int128",
                                        "typeString": "int128"
                                      }
                                    },
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_int128",
                                      "typeString": "int128"
                                    }
                                  },
                                  "src": "3524:30:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_int128",
                                    "typeString": "int128"
                                  }
                                },
                                "id": 33475,
                                "nodeType": "ExpressionStatement",
                                "src": "3524:30:40"
                              }
                            ]
                          }
                        },
                        "id": 33481,
                        "nodeType": "IfStatement",
                        "src": "3367:253:40",
                        "trueBody": {
                          "id": 33463,
                          "nodeType": "Block",
                          "src": "3402:62:40",
                          "statements": [
                            {
                              "expression": {
                                "id": 33461,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftHandSide": {
                                  "id": 33455,
                                  "name": "pnl",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 33435,
                                  "src": "3420:3:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_int128",
                                    "typeString": "int128"
                                  }
                                },
                                "nodeType": "Assignment",
                                "operator": "=",
                                "rightHandSide": {
                                  "arguments": [
                                    {
                                      "expression": {
                                        "id": 33458,
                                        "name": "position",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 33413,
                                        "src": "3433:8:40",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                                          "typeString": "struct Position storage pointer"
                                        }
                                      },
                                      "id": 33459,
                                      "isConstant": false,
                                      "isLValue": true,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "memberLocation": "3442:6:40",
                                      "memberName": "shares",
                                      "nodeType": "MemberAccess",
                                      "referencedDeclaration": 33915,
                                      "src": "3433:15:40",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_uint128",
                                        "typeString": "uint128"
                                      }
                                    }
                                  ],
                                  "expression": {
                                    "argumentTypes": [
                                      {
                                        "typeIdentifier": "t_uint128",
                                        "typeString": "uint128"
                                      }
                                    ],
                                    "id": 33457,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": true,
                                    "lValueRequested": false,
                                    "nodeType": "ElementaryTypeNameExpression",
                                    "src": "3426:6:40",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_type$_t_int128_$",
                                      "typeString": "type(int128)"
                                    },
                                    "typeName": {
                                      "id": 33456,
                                      "name": "int128",
                                      "nodeType": "ElementaryTypeName",
                                      "src": "3426:6:40",
                                      "typeDescriptions": {}
                                    }
                                  },
                                  "id": 33460,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "kind": "typeConversion",
                                  "lValueRequested": false,
                                  "nameLocations": [],
                                  "names": [],
                                  "nodeType": "FunctionCall",
                                  "src": "3426:23:40",
                                  "tryCall": false,
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_int128",
                                    "typeString": "int128"
                                  }
                                },
                                "src": "3420:29:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_int128",
                                  "typeString": "int128"
                                }
                              },
                              "id": 33462,
                              "nodeType": "ExpressionStatement",
                              "src": "3420:29:40"
                            }
                          ]
                        }
                      }
                    ]
                  }
                },
                {
                  "condition": {
                    "commonType": {
                      "typeIdentifier": "t_int128",
                      "typeString": "int128"
                    },
                    "id": 33517,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftExpression": {
                      "id": 33515,
                      "name": "pnl",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33435,
                      "src": "3927:3:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_int128",
                        "typeString": "int128"
                      }
                    },
                    "nodeType": "BinaryOperation",
                    "operator": ">",
                    "rightExpression": {
                      "hexValue": "30",
                      "id": 33516,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": true,
                      "kind": "number",
                      "lValueRequested": false,
                      "nodeType": "Literal",
                      "src": "3933:1:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_rational_0_by_1",
                        "typeString": "int_const 0"
                      },
                      "value": "0"
                    },
                    "src": "3927:7:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "falseBody": {
                    "id": 33567,
                    "nodeType": "Block",
                    "src": "4032:274:40",
                    "statements": [
                      {
                        "assignments": [
                          33536
                        ],
                        "declarations": [
                          {
                            "constant": false,
                            "id": 33536,
                            "mutability": "mutable",
                            "name": "protocolShare",
                            "nameLocation": "4054:13:40",
                            "nodeType": "VariableDeclaration",
                            "scope": 33567,
                            "src": "4046:21:40",
                            "stateVariable": false,
                            "storageLocation": "default",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            },
                            "typeName": {
                              "id": 33535,
                              "name": "uint256",
                              "nodeType": "ElementaryTypeName",
                              "src": "4046:7:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "visibility": "internal"
                          }
                        ],
                        "id": 33543,
                        "initialValue": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 33542,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "commonType": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            },
                            "id": 33540,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "leftExpression": {
                              "expression": {
                                "id": 33537,
                                "name": "position",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 33413,
                                "src": "4070:8:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                                  "typeString": "struct Position storage pointer"
                                }
                              },
                              "id": 33538,
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "4079:6:40",
                              "memberName": "shares",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 33915,
                              "src": "4070:15:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint128",
                                "typeString": "uint128"
                              }
                            },
                            "nodeType": "BinaryOperation",
                            "operator": "*",
                            "rightExpression": {
                              "id": 33539,
                              "name": "fee",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33243,
                              "src": "4088:3:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "src": "4070:21:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": "/",
                          "rightExpression": {
                            "id": 33541,
                            "name": "PRECISION",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33216,
                            "src": "4094:9:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "4070:33:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        "nodeType": "VariableDeclarationStatement",
                        "src": "4046:57:40"
                      },
                      {
                        "expression": {
                          "arguments": [
                            {
                              "id": 33547,
                              "name": "protocol",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33252,
                              "src": "4140:8:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            },
                            {
                              "id": 33548,
                              "name": "protocolShare",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33536,
                              "src": "4150:13:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              },
                              {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            ],
                            "expression": {
                              "id": 33544,
                              "name": "liquidityPool",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33249,
                              "src": "4117:13:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                                "typeString": "contract ILiquidityPool"
                              }
                            },
                            "id": 33546,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "memberLocation": "4131:8:40",
                            "memberName": "transfer",
                            "nodeType": "MemberAccess",
                            "referencedDeclaration": 30680,
                            "src": "4117:22:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$",
                              "typeString": "function (address,uint256) external returns (bool)"
                            }
                          },
                          "id": 33549,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "functionCall",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "4117:47:40",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "id": 33550,
                        "nodeType": "ExpressionStatement",
                        "src": "4117:47:40"
                      },
                      {
                        "expression": {
                          "arguments": [
                            {
                              "commonType": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              },
                              "id": 33559,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "leftExpression": {
                                "commonType": {
                                  "typeIdentifier": "t_uint128",
                                  "typeString": "uint128"
                                },
                                "id": 33557,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftExpression": {
                                  "expression": {
                                    "id": 33554,
                                    "name": "position",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 33413,
                                    "src": "4197:8:40",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                                      "typeString": "struct Position storage pointer"
                                    }
                                  },
                                  "id": 33555,
                                  "isConstant": false,
                                  "isLValue": true,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "memberLocation": "4206:6:40",
                                  "memberName": "shares",
                                  "nodeType": "MemberAccess",
                                  "referencedDeclaration": 33915,
                                  "src": "4197:15:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint128",
                                    "typeString": "uint128"
                                  }
                                },
                                "nodeType": "BinaryOperation",
                                "operator": "*",
                                "rightExpression": {
                                  "hexValue": "32",
                                  "id": 33556,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "kind": "number",
                                  "lValueRequested": false,
                                  "nodeType": "Literal",
                                  "src": "4215:1:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_rational_2_by_1",
                                    "typeString": "int_const 2"
                                  },
                                  "value": "2"
                                },
                                "src": "4197:19:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint128",
                                  "typeString": "uint128"
                                }
                              },
                              "nodeType": "BinaryOperation",
                              "operator": "-",
                              "rightExpression": {
                                "id": 33558,
                                "name": "protocolShare",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 33536,
                                "src": "4219:13:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "src": "4197:35:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            ],
                            "expression": {
                              "id": 33551,
                              "name": "liquidityPool",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33249,
                              "src": "4178:13:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                                "typeString": "contract ILiquidityPool"
                              }
                            },
                            "id": 33553,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "memberLocation": "4192:4:40",
                            "memberName": "burn",
                            "nodeType": "MemberAccess",
                            "referencedDeclaration": 33844,
                            "src": "4178:18:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_external_nonpayable$_t_uint256_$returns$__$",
                              "typeString": "function (uint256) external"
                            }
                          },
                          "id": 33560,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "functionCall",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "4178:55:40",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_tuple$__$",
                            "typeString": "tuple()"
                          }
                        },
                        "id": 33561,
                        "nodeType": "ExpressionStatement",
                        "src": "4178:55:40"
                      },
                      {
                        "eventCall": {
                          "arguments": [
                            {
                              "id": 33563,
                              "name": "protocol",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33252,
                              "src": "4271:8:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            },
                            {
                              "id": 33564,
                              "name": "protocolShare",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33536,
                              "src": "4281:13:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              },
                              {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            ],
                            "id": 33562,
                            "name": "ProtocolShareTaken",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 34017,
                            "src": "4252:18:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_event_nonpayable$_t_address_$_t_uint256_$returns$__$",
                              "typeString": "function (address,uint256)"
                            }
                          },
                          "id": 33565,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "functionCall",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "4252:43:40",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_tuple$__$",
                            "typeString": "tuple()"
                          }
                        },
                        "id": 33566,
                        "nodeType": "EmitStatement",
                        "src": "4247:48:40"
                      }
                    ]
                  },
                  "id": 33568,
                  "nodeType": "IfStatement",
                  "src": "3923:383:40",
                  "trueBody": {
                    "id": 33534,
                    "nodeType": "Block",
                    "src": "3936:90:40",
                    "statements": [
                      {
                        "expression": {
                          "arguments": [
                            {
                              "expression": {
                                "id": 33521,
                                "name": "position",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 33413,
                                "src": "3973:8:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                                  "typeString": "struct Position storage pointer"
                                }
                              },
                              "id": 33522,
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "3982:6:40",
                              "memberName": "trader",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 33913,
                              "src": "3973:15:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            },
                            {
                              "arguments": [
                                {
                                  "commonType": {
                                    "typeIdentifier": "t_int256",
                                    "typeString": "int256"
                                  },
                                  "id": 33530,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "leftExpression": {
                                    "arguments": [
                                      {
                                        "id": 33527,
                                        "name": "pnl",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 33435,
                                        "src": "4005:3:40",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_int128",
                                          "typeString": "int128"
                                        }
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_int128",
                                          "typeString": "int128"
                                        }
                                      ],
                                      "id": 33526,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": true,
                                      "lValueRequested": false,
                                      "nodeType": "ElementaryTypeNameExpression",
                                      "src": "3998:6:40",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_type$_t_int256_$",
                                        "typeString": "type(int256)"
                                      },
                                      "typeName": {
                                        "id": 33525,
                                        "name": "int256",
                                        "nodeType": "ElementaryTypeName",
                                        "src": "3998:6:40",
                                        "typeDescriptions": {}
                                      }
                                    },
                                    "id": 33528,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "kind": "typeConversion",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "3998:11:40",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_int256",
                                      "typeString": "int256"
                                    }
                                  },
                                  "nodeType": "BinaryOperation",
                                  "operator": "*",
                                  "rightExpression": {
                                    "hexValue": "32",
                                    "id": 33529,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": true,
                                    "kind": "number",
                                    "lValueRequested": false,
                                    "nodeType": "Literal",
                                    "src": "4012:1:40",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_rational_2_by_1",
                                      "typeString": "int_const 2"
                                    },
                                    "value": "2"
                                  },
                                  "src": "3998:15:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_int256",
                                    "typeString": "int256"
                                  }
                                }
                              ],
                              "expression": {
                                "argumentTypes": [
                                  {
                                    "typeIdentifier": "t_int256",
                                    "typeString": "int256"
                                  }
                                ],
                                "id": 33524,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": true,
                                "lValueRequested": false,
                                "nodeType": "ElementaryTypeNameExpression",
                                "src": "3990:7:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_type$_t_uint256_$",
                                  "typeString": "type(uint256)"
                                },
                                "typeName": {
                                  "id": 33523,
                                  "name": "uint256",
                                  "nodeType": "ElementaryTypeName",
                                  "src": "3990:7:40",
                                  "typeDescriptions": {}
                                }
                              },
                              "id": 33531,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "kind": "typeConversion",
                              "lValueRequested": false,
                              "nameLocations": [],
                              "names": [],
                              "nodeType": "FunctionCall",
                              "src": "3990:24:40",
                              "tryCall": false,
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              },
                              {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            ],
                            "expression": {
                              "id": 33518,
                              "name": "liquidityPool",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33249,
                              "src": "3950:13:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                                "typeString": "contract ILiquidityPool"
                              }
                            },
                            "id": 33520,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "memberLocation": "3964:8:40",
                            "memberName": "transfer",
                            "nodeType": "MemberAccess",
                            "referencedDeclaration": 30680,
                            "src": "3950:22:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$",
                              "typeString": "function (address,uint256) external returns (bool)"
                            }
                          },
                          "id": 33532,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "functionCall",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "3950:65:40",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "id": 33533,
                        "nodeType": "ExpressionStatement",
                        "src": "3950:65:40"
                      }
                    ]
                  }
                },
                {
                  "eventCall": {
                    "arguments": [
                      {
                        "expression": {
                          "id": 33570,
                          "name": "position",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 33413,
                          "src": "4336:8:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                            "typeString": "struct Position storage pointer"
                          }
                        },
                        "id": 33571,
                        "isConstant": false,
                        "isLValue": true,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "4345:6:40",
                        "memberName": "trader",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 33913,
                        "src": "4336:15:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      },
                      {
                        "id": 33572,
                        "name": "positionId",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33406,
                        "src": "4353:10:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "id": 33573,
                        "name": "closePrice",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33430,
                        "src": "4365:10:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "expression": {
                          "id": 33574,
                          "name": "block",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": -4,
                          "src": "4377:5:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_magic_block",
                            "typeString": "block"
                          }
                        },
                        "id": 33575,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "4383:9:40",
                        "memberName": "timestamp",
                        "nodeType": "MemberAccess",
                        "src": "4377:15:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      {
                        "id": 33576,
                        "name": "pnl",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33435,
                        "src": "4394:3:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int128",
                          "typeString": "int128"
                        }
                      },
                      {
                        "expression": {
                          "id": 33577,
                          "name": "position",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 33413,
                          "src": "4399:8:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_struct$_Position_$33922_storage_ptr",
                            "typeString": "struct Position storage pointer"
                          }
                        },
                        "id": 33578,
                        "isConstant": false,
                        "isLValue": true,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "4408:6:40",
                        "memberName": "isLong",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 33919,
                        "src": "4399:15:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        {
                          "typeIdentifier": "t_int128",
                          "typeString": "int128"
                        },
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      ],
                      "id": 33569,
                      "name": "PositionClosed",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33999,
                      "src": "4321:14:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_event_nonpayable$_t_address_$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_bool_$returns$__$",
                        "typeString": "function (address,uint256,uint256,uint256,int256,bool)"
                      }
                    },
                    "id": 33579,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "4321:94:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33580,
                  "nodeType": "EmitStatement",
                  "src": "4316:99:40"
                },
                {
                  "expression": {
                    "id": 33584,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "nodeType": "UnaryOperation",
                    "operator": "delete",
                    "prefix": true,
                    "src": "4426:28:40",
                    "subExpression": {
                      "baseExpression": {
                        "id": 33581,
                        "name": "positions",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33257,
                        "src": "4433:9:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_mapping$_t_uint256_$_t_struct$_Position_$33922_storage_$",
                          "typeString": "mapping(uint256 => struct Position storage ref)"
                        }
                      },
                      "id": 33583,
                      "indexExpression": {
                        "id": 33582,
                        "name": "positionId",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33406,
                        "src": "4443:10:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "isConstant": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "nodeType": "IndexAccess",
                      "src": "4433:21:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_struct$_Position_$33922_storage",
                        "typeString": "struct Position storage ref"
                      }
                    },
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33585,
                  "nodeType": "ExpressionStatement",
                  "src": "4426:28:40"
                },
                {
                  "expression": {
                    "hexValue": "74727565",
                    "id": 33586,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": true,
                    "kind": "bool",
                    "lValueRequested": false,
                    "nodeType": "Literal",
                    "src": "4472:4:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    },
                    "value": "true"
                  },
                  "functionReturnParameters": 33410,
                  "id": 33587,
                  "nodeType": "Return",
                  "src": "4465:11:40"
                }
              ]
            },
            "documentation": {
              "id": 33404,
              "nodeType": "StructuredDocumentation",
              "src": "2784:55:40",
              "text": "@dev Internal function to close a trading position."
            },
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "_closePosition",
            "nameLocation": "2853:14:40",
            "parameters": {
              "id": 33407,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33406,
                  "mutability": "mutable",
                  "name": "positionId",
                  "nameLocation": "2876:10:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33589,
                  "src": "2868:18:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 33405,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "2868:7:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "2867:20:40"
            },
            "returnParameters": {
              "id": 33410,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33409,
                  "mutability": "mutable",
                  "name": "success",
                  "nameLocation": "2911:7:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33589,
                  "src": "2906:12:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bool",
                    "typeString": "bool"
                  },
                  "typeName": {
                    "id": 33408,
                    "name": "bool",
                    "nodeType": "ElementaryTypeName",
                    "src": "2906:4:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "2905:14:40"
            },
            "scope": 33755,
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "id": 33616,
            "nodeType": "FunctionDefinition",
            "src": "4566:183:40",
            "nodes": [],
            "body": {
              "id": 33615,
              "nodeType": "Block",
              "src": "4629:120:40",
              "nodes": [],
              "statements": [
                {
                  "body": {
                    "id": 33613,
                    "nodeType": "Block",
                    "src": "4688:55:40",
                    "statements": [
                      {
                        "expression": {
                          "arguments": [
                            {
                              "baseExpression": {
                                "id": 33608,
                                "name": "positionIds",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 33593,
                                "src": "4717:11:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_array$_t_uint256_$dyn_memory_ptr",
                                  "typeString": "uint256[] memory"
                                }
                              },
                              "id": 33610,
                              "indexExpression": {
                                "id": 33609,
                                "name": "i",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 33597,
                                "src": "4729:1:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": false,
                              "nodeType": "IndexAccess",
                              "src": "4717:14:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            ],
                            "id": 33607,
                            "name": "_closePosition",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33589,
                            "src": "4702:14:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_internal_nonpayable$_t_uint256_$returns$_t_bool_$",
                              "typeString": "function (uint256) returns (bool)"
                            }
                          },
                          "id": 33611,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "functionCall",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "4702:30:40",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "id": 33612,
                        "nodeType": "ExpressionStatement",
                        "src": "4702:30:40"
                      }
                    ]
                  },
                  "condition": {
                    "commonType": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    },
                    "id": 33603,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftExpression": {
                      "id": 33600,
                      "name": "i",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33597,
                      "src": "4659:1:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "nodeType": "BinaryOperation",
                    "operator": "<",
                    "rightExpression": {
                      "expression": {
                        "id": 33601,
                        "name": "positionIds",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33593,
                        "src": "4663:11:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_array$_t_uint256_$dyn_memory_ptr",
                          "typeString": "uint256[] memory"
                        }
                      },
                      "id": 33602,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "memberLocation": "4675:6:40",
                      "memberName": "length",
                      "nodeType": "MemberAccess",
                      "src": "4663:18:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "src": "4659:22:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "id": 33614,
                  "initializationExpression": {
                    "assignments": [
                      33597
                    ],
                    "declarations": [
                      {
                        "constant": false,
                        "id": 33597,
                        "mutability": "mutable",
                        "name": "i",
                        "nameLocation": "4652:1:40",
                        "nodeType": "VariableDeclaration",
                        "scope": 33614,
                        "src": "4644:9:40",
                        "stateVariable": false,
                        "storageLocation": "default",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        "typeName": {
                          "id": 33596,
                          "name": "uint256",
                          "nodeType": "ElementaryTypeName",
                          "src": "4644:7:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        "visibility": "internal"
                      }
                    ],
                    "id": 33599,
                    "initialValue": {
                      "hexValue": "30",
                      "id": 33598,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": true,
                      "kind": "number",
                      "lValueRequested": false,
                      "nodeType": "Literal",
                      "src": "4656:1:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_rational_0_by_1",
                        "typeString": "int_const 0"
                      },
                      "value": "0"
                    },
                    "nodeType": "VariableDeclarationStatement",
                    "src": "4644:13:40"
                  },
                  "loopExpression": {
                    "expression": {
                      "id": 33605,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "nodeType": "UnaryOperation",
                      "operator": "++",
                      "prefix": false,
                      "src": "4683:3:40",
                      "subExpression": {
                        "id": 33604,
                        "name": "i",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33597,
                        "src": "4683:1:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "id": 33606,
                    "nodeType": "ExpressionStatement",
                    "src": "4683:3:40"
                  },
                  "nodeType": "ForStatement",
                  "src": "4639:104:40"
                }
              ]
            },
            "baseFunctions": [
              33942
            ],
            "documentation": {
              "id": 33590,
              "nodeType": "StructuredDocumentation",
              "src": "4489:72:40",
              "text": "@notice Allows a trader to close multiple trading positions at once."
            },
            "functionSelector": "aa93186d",
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "closePositions",
            "nameLocation": "4575:14:40",
            "parameters": {
              "id": 33594,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33593,
                  "mutability": "mutable",
                  "name": "positionIds",
                  "nameLocation": "4607:11:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33616,
                  "src": "4590:28:40",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_array$_t_uint256_$dyn_memory_ptr",
                    "typeString": "uint256[]"
                  },
                  "typeName": {
                    "baseType": {
                      "id": 33591,
                      "name": "uint256",
                      "nodeType": "ElementaryTypeName",
                      "src": "4590:7:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "id": 33592,
                    "nodeType": "ArrayTypeName",
                    "src": "4590:9:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_array$_t_uint256_$dyn_storage_ptr",
                      "typeString": "uint256[]"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "4589:30:40"
            },
            "returnParameters": {
              "id": 33595,
              "nodeType": "ParameterList",
              "parameters": [],
              "src": "4629:0:40"
            },
            "scope": 33755,
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "external"
          },
          {
            "id": 33635,
            "nodeType": "FunctionDefinition",
            "src": "4813:167:40",
            "nodes": [],
            "body": {
              "id": 33634,
              "nodeType": "Block",
              "src": "4877:103:40",
              "nodes": [],
              "statements": [
                {
                  "expression": {
                    "id": 33625,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "id": 33623,
                      "name": "liquidityPool",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33249,
                      "src": "4887:13:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                        "typeString": "contract ILiquidityPool"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 33624,
                      "name": "_liquidityPool",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33620,
                      "src": "4903:14:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                        "typeString": "contract ILiquidityPool"
                      }
                    },
                    "src": "4887:30:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                      "typeString": "contract ILiquidityPool"
                    }
                  },
                  "id": 33626,
                  "nodeType": "ExpressionStatement",
                  "src": "4887:30:40"
                },
                {
                  "eventCall": {
                    "arguments": [
                      {
                        "arguments": [
                          {
                            "id": 33630,
                            "name": "_liquidityPool",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33620,
                            "src": "4957:14:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                              "typeString": "contract ILiquidityPool"
                            }
                          }
                        ],
                        "expression": {
                          "argumentTypes": [
                            {
                              "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                              "typeString": "contract ILiquidityPool"
                            }
                          ],
                          "id": 33629,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": true,
                          "lValueRequested": false,
                          "nodeType": "ElementaryTypeNameExpression",
                          "src": "4949:7:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_type$_t_address_$",
                            "typeString": "type(address)"
                          },
                          "typeName": {
                            "id": 33628,
                            "name": "address",
                            "nodeType": "ElementaryTypeName",
                            "src": "4949:7:40",
                            "typeDescriptions": {}
                          }
                        },
                        "id": 33631,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "kind": "typeConversion",
                        "lValueRequested": false,
                        "nameLocations": [],
                        "names": [],
                        "nodeType": "FunctionCall",
                        "src": "4949:23:40",
                        "tryCall": false,
                        "typeDescriptions": {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      ],
                      "id": 33627,
                      "name": "LiquidityPoolSet",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 34003,
                      "src": "4932:16:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_event_nonpayable$_t_address_$returns$__$",
                        "typeString": "function (address)"
                      }
                    },
                    "id": 33632,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "4932:41:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33633,
                  "nodeType": "EmitStatement",
                  "src": "4927:46:40"
                }
              ]
            },
            "baseFunctions": [
              33948
            ],
            "documentation": {
              "id": 33617,
              "nodeType": "StructuredDocumentation",
              "src": "4755:53:40",
              "text": "@notice Sets the liquidity pool for the contract."
            },
            "functionSelector": "01877020",
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "setLiquidityPool",
            "nameLocation": "4822:16:40",
            "parameters": {
              "id": 33621,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33620,
                  "mutability": "mutable",
                  "name": "_liquidityPool",
                  "nameLocation": "4854:14:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33635,
                  "src": "4839:29:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                    "typeString": "contract ILiquidityPool"
                  },
                  "typeName": {
                    "id": 33619,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 33618,
                      "name": "ILiquidityPool",
                      "nameLocations": [
                        "4839:14:40"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 33908,
                      "src": "4839:14:40"
                    },
                    "referencedDeclaration": 33908,
                    "src": "4839:14:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_contract$_ILiquidityPool_$33908",
                      "typeString": "contract ILiquidityPool"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "4838:31:40"
            },
            "returnParameters": {
              "id": 33622,
              "nodeType": "ParameterList",
              "parameters": [],
              "src": "4877:0:40"
            },
            "scope": 33755,
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "public"
          },
          {
            "id": 33650,
            "nodeType": "FunctionDefinition",
            "src": "5029:121:40",
            "nodes": [],
            "body": {
              "id": 33649,
              "nodeType": "Block",
              "src": "5076:74:40",
              "nodes": [],
              "statements": [
                {
                  "expression": {
                    "id": 33643,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "id": 33641,
                      "name": "protocol",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33252,
                      "src": "5086:8:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_address",
                        "typeString": "address"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 33642,
                      "name": "_protocol",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33638,
                      "src": "5097:9:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_address",
                        "typeString": "address"
                      }
                    },
                    "src": "5086:20:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_address",
                      "typeString": "address"
                    }
                  },
                  "id": 33644,
                  "nodeType": "ExpressionStatement",
                  "src": "5086:20:40"
                },
                {
                  "eventCall": {
                    "arguments": [
                      {
                        "id": 33646,
                        "name": "_protocol",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33638,
                        "src": "5133:9:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      ],
                      "id": 33645,
                      "name": "ProtocolSet",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 34007,
                      "src": "5121:11:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_event_nonpayable$_t_address_$returns$__$",
                        "typeString": "function (address)"
                      }
                    },
                    "id": 33647,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "5121:22:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33648,
                  "nodeType": "EmitStatement",
                  "src": "5116:27:40"
                }
              ]
            },
            "baseFunctions": [
              33953
            ],
            "documentation": {
              "id": 33636,
              "nodeType": "StructuredDocumentation",
              "src": "4986:38:40",
              "text": "@notice Sets the protocol address."
            },
            "functionSelector": "0a9d793d",
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "setProtocol",
            "nameLocation": "5038:11:40",
            "parameters": {
              "id": 33639,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33638,
                  "mutability": "mutable",
                  "name": "_protocol",
                  "nameLocation": "5058:9:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33650,
                  "src": "5050:17:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  },
                  "typeName": {
                    "id": 33637,
                    "name": "address",
                    "nodeType": "ElementaryTypeName",
                    "src": "5050:7:40",
                    "stateMutability": "nonpayable",
                    "typeDescriptions": {
                      "typeIdentifier": "t_address",
                      "typeString": "address"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "5049:19:40"
            },
            "returnParameters": {
              "id": 33640,
              "nodeType": "ParameterList",
              "parameters": [],
              "src": "5076:0:40"
            },
            "scope": 33755,
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "public"
          },
          {
            "id": 33670,
            "nodeType": "FunctionDefinition",
            "src": "5229:189:40",
            "nodes": [],
            "body": {
              "id": 33669,
              "nodeType": "Block",
              "src": "5288:130:40",
              "nodes": [],
              "statements": [
                {
                  "expression": {
                    "id": 33660,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "id": 33656,
                      "name": "chainlinkAggregator",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 33261,
                      "src": "5298:19:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_contract$_AggregatorV3Interface_$33801",
                        "typeString": "contract AggregatorV3Interface"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "arguments": [
                        {
                          "id": 33658,
                          "name": "aggregator",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 33653,
                          "src": "5342:10:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_address",
                            "typeString": "address"
                          }
                        }
                      ],
                      "expression": {
                        "argumentTypes": [
                          {
                            "typeIdentifier": "t_address",
                            "typeString": "address"
                          }
                        ],
                        "id": 33657,
                        "name": "AggregatorV3Interface",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33801,
                        "src": "5320:21:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_type$_t_contract$_AggregatorV3Interface_$33801_$",
                          "typeString": "type(contract AggregatorV3Interface)"
                        }
                      },
                      "id": 33659,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "kind": "typeConversion",
                      "lValueRequested": false,
                      "nameLocations": [],
                      "names": [],
                      "nodeType": "FunctionCall",
                      "src": "5320:33:40",
                      "tryCall": false,
                      "typeDescriptions": {
                        "typeIdentifier": "t_contract$_AggregatorV3Interface_$33801",
                        "typeString": "contract AggregatorV3Interface"
                      }
                    },
                    "src": "5298:55:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_contract$_AggregatorV3Interface_$33801",
                      "typeString": "contract AggregatorV3Interface"
                    }
                  },
                  "id": 33661,
                  "nodeType": "ExpressionStatement",
                  "src": "5298:55:40"
                },
                {
                  "eventCall": {
                    "arguments": [
                      {
                        "arguments": [
                          {
                            "id": 33665,
                            "name": "aggregator",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33653,
                            "src": "5399:10:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_address",
                              "typeString": "address"
                            }
                          }
                        ],
                        "expression": {
                          "argumentTypes": [
                            {
                              "typeIdentifier": "t_address",
                              "typeString": "address"
                            }
                          ],
                          "id": 33664,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": true,
                          "lValueRequested": false,
                          "nodeType": "ElementaryTypeNameExpression",
                          "src": "5391:7:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_type$_t_address_$",
                            "typeString": "type(address)"
                          },
                          "typeName": {
                            "id": 33663,
                            "name": "address",
                            "nodeType": "ElementaryTypeName",
                            "src": "5391:7:40",
                            "typeDescriptions": {}
                          }
                        },
                        "id": 33666,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "kind": "typeConversion",
                        "lValueRequested": false,
                        "nameLocations": [],
                        "names": [],
                        "nodeType": "FunctionCall",
                        "src": "5391:19:40",
                        "tryCall": false,
                        "typeDescriptions": {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        }
                      ],
                      "id": 33662,
                      "name": "ChainlinkAggregatorSet",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 34011,
                      "src": "5368:22:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_event_nonpayable$_t_address_$returns$__$",
                        "typeString": "function (address)"
                      }
                    },
                    "id": 33667,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "5368:43:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33668,
                  "nodeType": "EmitStatement",
                  "src": "5363:48:40"
                }
              ]
            },
            "baseFunctions": [
              33958
            ],
            "documentation": {
              "id": 33651,
              "nodeType": "StructuredDocumentation",
              "src": "5156:68:40",
              "text": "@notice Sets the Chainlink aggregator for fetching asset prices."
            },
            "functionSelector": "ef353917",
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "setChainlinkAggregator",
            "nameLocation": "5238:22:40",
            "parameters": {
              "id": 33654,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33653,
                  "mutability": "mutable",
                  "name": "aggregator",
                  "nameLocation": "5269:10:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33670,
                  "src": "5261:18:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  },
                  "typeName": {
                    "id": 33652,
                    "name": "address",
                    "nodeType": "ElementaryTypeName",
                    "src": "5261:7:40",
                    "stateMutability": "nonpayable",
                    "typeDescriptions": {
                      "typeIdentifier": "t_address",
                      "typeString": "address"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "5260:20:40"
            },
            "returnParameters": {
              "id": 33655,
              "nodeType": "ParameterList",
              "parameters": [],
              "src": "5288:0:40"
            },
            "scope": 33755,
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "public"
          },
          {
            "id": 33695,
            "nodeType": "FunctionDefinition",
            "src": "5500:262:40",
            "nodes": [],
            "body": {
              "id": 33694,
              "nodeType": "Block",
              "src": "5560:202:40",
              "nodes": [],
              "statements": [
                {
                  "assignments": [
                    null,
                    33677,
                    null,
                    null,
                    null
                  ],
                  "declarations": [
                    null,
                    {
                      "constant": false,
                      "id": 33677,
                      "mutability": "mutable",
                      "name": "price",
                      "nameLocation": "5580:5:40",
                      "nodeType": "VariableDeclaration",
                      "scope": 33694,
                      "src": "5573:12:40",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      },
                      "typeName": {
                        "id": 33676,
                        "name": "int256",
                        "nodeType": "ElementaryTypeName",
                        "src": "5573:6:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      },
                      "visibility": "internal"
                    },
                    null,
                    null,
                    null
                  ],
                  "id": 33681,
                  "initialValue": {
                    "arguments": [],
                    "expression": {
                      "argumentTypes": [],
                      "expression": {
                        "id": 33678,
                        "name": "chainlinkAggregator",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33261,
                        "src": "5592:19:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_contract$_AggregatorV3Interface_$33801",
                          "typeString": "contract AggregatorV3Interface"
                        }
                      },
                      "id": 33679,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "memberLocation": "5612:15:40",
                      "memberName": "latestRoundData",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 33800,
                      "src": "5592:35:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_external_view$__$returns$_t_uint80_$_t_int256_$_t_uint256_$_t_uint256_$_t_uint80_$",
                        "typeString": "function () view external returns (uint80,int256,uint256,uint256,uint80)"
                      }
                    },
                    "id": 33680,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "5592:37:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$_t_uint80_$_t_int256_$_t_uint256_$_t_uint256_$_t_uint80_$",
                      "typeString": "tuple(uint80,int256,uint256,uint256,uint80)"
                    }
                  },
                  "nodeType": "VariableDeclarationStatement",
                  "src": "5570:59:40"
                },
                {
                  "expression": {
                    "arguments": [
                      {
                        "commonType": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        },
                        "id": 33685,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "leftExpression": {
                          "id": 33683,
                          "name": "price",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 33677,
                          "src": "5647:5:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_int256",
                            "typeString": "int256"
                          }
                        },
                        "nodeType": "BinaryOperation",
                        "operator": ">",
                        "rightExpression": {
                          "hexValue": "30",
                          "id": 33684,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": true,
                          "kind": "number",
                          "lValueRequested": false,
                          "nodeType": "Literal",
                          "src": "5655:1:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_rational_0_by_1",
                            "typeString": "int_const 0"
                          },
                          "value": "0"
                        },
                        "src": "5647:9:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      {
                        "hexValue": "5472616465506169723a3a5f67657443757272656e7450726963653a204661696c656420746f206665746368207468652063757272656e742070726963652e",
                        "id": 33686,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "kind": "string",
                        "lValueRequested": false,
                        "nodeType": "Literal",
                        "src": "5658:65:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_stringliteral_3953b2948780ac9608afb61a84ec18f2c056dfe8408f215f198211f700337847",
                          "typeString": "literal_string \"TradePair::_getCurrentPrice: Failed to fetch the current price.\""
                        },
                        "value": "TradePair::_getCurrentPrice: Failed to fetch the current price."
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        },
                        {
                          "typeIdentifier": "t_stringliteral_3953b2948780ac9608afb61a84ec18f2c056dfe8408f215f198211f700337847",
                          "typeString": "literal_string \"TradePair::_getCurrentPrice: Failed to fetch the current price.\""
                        }
                      ],
                      "id": 33682,
                      "name": "require",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [
                        -18,
                        -18
                      ],
                      "referencedDeclaration": -18,
                      "src": "5639:7:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",
                        "typeString": "function (bool,string memory) pure"
                      }
                    },
                    "id": 33687,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "5639:85:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 33688,
                  "nodeType": "ExpressionStatement",
                  "src": "5639:85:40"
                },
                {
                  "expression": {
                    "arguments": [
                      {
                        "id": 33691,
                        "name": "price",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 33677,
                        "src": "5749:5:40",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      ],
                      "id": 33690,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": true,
                      "lValueRequested": false,
                      "nodeType": "ElementaryTypeNameExpression",
                      "src": "5741:7:40",
                      "typeDescriptions": {
                        "typeIdentifier": "t_type$_t_uint256_$",
                        "typeString": "type(uint256)"
                      },
                      "typeName": {
                        "id": 33689,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "5741:7:40",
                        "typeDescriptions": {}
                      }
                    },
                    "id": 33692,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "typeConversion",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "5741:14:40",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "functionReturnParameters": 33675,
                  "id": 33693,
                  "nodeType": "Return",
                  "src": "5734:21:40"
                }
              ]
            },
            "documentation": {
              "id": 33671,
              "nodeType": "StructuredDocumentation",
              "src": "5424:71:40",
              "text": "@dev Fetches the current asset price from the Chainlink aggregator."
            },
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "_getCurrentPrice",
            "nameLocation": "5509:16:40",
            "parameters": {
              "id": 33672,
              "nodeType": "ParameterList",
              "parameters": [],
              "src": "5525:2:40"
            },
            "returnParameters": {
              "id": 33675,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33674,
                  "mutability": "mutable",
                  "name": "",
                  "nameLocation": "-1:-1:-1",
                  "nodeType": "VariableDeclaration",
                  "scope": 33695,
                  "src": "5551:7:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 33673,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "5551:7:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "5550:9:40"
            },
            "scope": 33755,
            "stateMutability": "view",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "id": 33754,
            "nodeType": "FunctionDefinition",
            "src": "5899:554:40",
            "nodes": [],
            "body": {
              "id": 33753,
              "nodeType": "Block",
              "src": "6083:370:40",
              "nodes": [],
              "statements": [
                {
                  "condition": {
                    "id": 33709,
                    "name": "isLong",
                    "nodeType": "Identifier",
                    "overloadedDeclarations": [],
                    "referencedDeclaration": 33702,
                    "src": "6097:6:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "falseBody": {
                    "id": 33751,
                    "nodeType": "Block",
                    "src": "6279:168:40",
                    "statements": [
                      {
                        "expression": {
                          "id": 33739,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftHandSide": {
                            "id": 33731,
                            "name": "liquidationPrice",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33705,
                            "src": "6293:16:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "Assignment",
                          "operator": "=",
                          "rightHandSide": {
                            "commonType": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            },
                            "id": 33738,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "leftExpression": {
                              "id": 33732,
                              "name": "entryPrice",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33698,
                              "src": "6312:10:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "nodeType": "BinaryOperation",
                            "operator": "+",
                            "rightExpression": {
                              "commonType": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              },
                              "id": 33737,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "leftExpression": {
                                "commonType": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                "id": 33735,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftExpression": {
                                  "id": 33733,
                                  "name": "entryPrice",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 33698,
                                  "src": "6325:10:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "nodeType": "BinaryOperation",
                                "operator": "*",
                                "rightExpression": {
                                  "id": 33734,
                                  "name": "PRECISION",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 33216,
                                  "src": "6338:9:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "src": "6325:22:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "nodeType": "BinaryOperation",
                              "operator": "/",
                              "rightExpression": {
                                "id": 33736,
                                "name": "leverage",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 33700,
                                "src": "6350:8:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "src": "6325:33:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "src": "6312:46:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "6293:65:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        "id": 33740,
                        "nodeType": "ExpressionStatement",
                        "src": "6293:65:40"
                      },
                      {
                        "expression": {
                          "id": 33749,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftHandSide": {
                            "id": 33741,
                            "name": "takeProfitPrice",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33707,
                            "src": "6372:15:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "Assignment",
                          "operator": "=",
                          "rightHandSide": {
                            "commonType": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            },
                            "id": 33748,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "leftExpression": {
                              "id": 33742,
                              "name": "entryPrice",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33698,
                              "src": "6390:10:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "nodeType": "BinaryOperation",
                            "operator": "-",
                            "rightExpression": {
                              "commonType": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              },
                              "id": 33747,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "leftExpression": {
                                "commonType": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                "id": 33745,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftExpression": {
                                  "id": 33743,
                                  "name": "entryPrice",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 33698,
                                  "src": "6403:10:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "nodeType": "BinaryOperation",
                                "operator": "*",
                                "rightExpression": {
                                  "id": 33744,
                                  "name": "PRECISION",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 33216,
                                  "src": "6416:9:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "src": "6403:22:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "nodeType": "BinaryOperation",
                              "operator": "/",
                              "rightExpression": {
                                "id": 33746,
                                "name": "leverage",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 33700,
                                "src": "6428:8:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "src": "6403:33:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "src": "6390:46:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "6372:64:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        "id": 33750,
                        "nodeType": "ExpressionStatement",
                        "src": "6372:64:40"
                      }
                    ]
                  },
                  "id": 33752,
                  "nodeType": "IfStatement",
                  "src": "6093:354:40",
                  "trueBody": {
                    "id": 33730,
                    "nodeType": "Block",
                    "src": "6105:168:40",
                    "statements": [
                      {
                        "expression": {
                          "id": 33718,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftHandSide": {
                            "id": 33710,
                            "name": "liquidationPrice",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33705,
                            "src": "6119:16:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "Assignment",
                          "operator": "=",
                          "rightHandSide": {
                            "commonType": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            },
                            "id": 33717,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "leftExpression": {
                              "id": 33711,
                              "name": "entryPrice",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33698,
                              "src": "6138:10:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "nodeType": "BinaryOperation",
                            "operator": "-",
                            "rightExpression": {
                              "commonType": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              },
                              "id": 33716,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "leftExpression": {
                                "commonType": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                "id": 33714,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftExpression": {
                                  "id": 33712,
                                  "name": "entryPrice",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 33698,
                                  "src": "6151:10:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "nodeType": "BinaryOperation",
                                "operator": "*",
                                "rightExpression": {
                                  "id": 33713,
                                  "name": "PRECISION",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 33216,
                                  "src": "6164:9:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "src": "6151:22:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "nodeType": "BinaryOperation",
                              "operator": "/",
                              "rightExpression": {
                                "id": 33715,
                                "name": "leverage",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 33700,
                                "src": "6176:8:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "src": "6151:33:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "src": "6138:46:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "6119:65:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        "id": 33719,
                        "nodeType": "ExpressionStatement",
                        "src": "6119:65:40"
                      },
                      {
                        "expression": {
                          "id": 33728,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftHandSide": {
                            "id": 33720,
                            "name": "takeProfitPrice",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 33707,
                            "src": "6198:15:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "Assignment",
                          "operator": "=",
                          "rightHandSide": {
                            "commonType": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            },
                            "id": 33727,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "leftExpression": {
                              "id": 33721,
                              "name": "entryPrice",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 33698,
                              "src": "6216:10:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "nodeType": "BinaryOperation",
                            "operator": "+",
                            "rightExpression": {
                              "commonType": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              },
                              "id": 33726,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "leftExpression": {
                                "commonType": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                "id": 33724,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftExpression": {
                                  "id": 33722,
                                  "name": "entryPrice",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 33698,
                                  "src": "6229:10:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "nodeType": "BinaryOperation",
                                "operator": "*",
                                "rightExpression": {
                                  "id": 33723,
                                  "name": "PRECISION",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 33216,
                                  "src": "6242:9:40",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "src": "6229:22:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "nodeType": "BinaryOperation",
                              "operator": "/",
                              "rightExpression": {
                                "id": 33725,
                                "name": "leverage",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 33700,
                                "src": "6254:8:40",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "src": "6229:33:40",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "src": "6216:46:40",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "6198:64:40",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        "id": 33729,
                        "nodeType": "ExpressionStatement",
                        "src": "6198:64:40"
                      }
                    ]
                  }
                }
              ]
            },
            "documentation": {
              "id": 33696,
              "nodeType": "StructuredDocumentation",
              "src": "5768:126:40",
              "text": "@dev Calculates the liquidation and take-profit prices for a position based on entry price, leverage, and trade direction."
            },
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "_calculatePriceTargets",
            "nameLocation": "5908:22:40",
            "parameters": {
              "id": 33703,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33698,
                  "mutability": "mutable",
                  "name": "entryPrice",
                  "nameLocation": "5939:10:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33754,
                  "src": "5931:18:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 33697,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "5931:7:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 33700,
                  "mutability": "mutable",
                  "name": "leverage",
                  "nameLocation": "5959:8:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33754,
                  "src": "5951:16:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 33699,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "5951:7:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 33702,
                  "mutability": "mutable",
                  "name": "isLong",
                  "nameLocation": "5974:6:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33754,
                  "src": "5969:11:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bool",
                    "typeString": "bool"
                  },
                  "typeName": {
                    "id": 33701,
                    "name": "bool",
                    "nodeType": "ElementaryTypeName",
                    "src": "5969:4:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "5930:51:40"
            },
            "returnParameters": {
              "id": 33708,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 33705,
                  "mutability": "mutable",
                  "name": "liquidationPrice",
                  "nameLocation": "6036:16:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33754,
                  "src": "6028:24:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 33704,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "6028:7:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 33707,
                  "mutability": "mutable",
                  "name": "takeProfitPrice",
                  "nameLocation": "6062:15:40",
                  "nodeType": "VariableDeclaration",
                  "scope": 33754,
                  "src": "6054:23:40",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 33706,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "6054:7:40",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "6027:51:40"
            },
            "scope": 33755,
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "private"
          }
        ],
        "abstract": false,
        "baseContracts": [
          {
            "baseName": {
              "id": 33212,
              "name": "ITradePair",
              "nameLocations": [
                "291:10:40"
              ],
              "nodeType": "IdentifierPath",
              "referencedDeclaration": 34018,
              "src": "291:10:40"
            },
            "id": 33213,
            "nodeType": "InheritanceSpecifier",
            "src": "291:10:40"
          }
        ],
        "canonicalName": "TradePair",
        "contractDependencies": [],
        "contractKind": "contract",
        "documentation": {
          "id": 33211,
          "nodeType": "StructuredDocumentation",
          "src": "193:76:40",
          "text": "@title TradePair - A contract for managing leveraged trading positions."
        },
        "fullyImplemented": true,
        "linearizedBaseContracts": [
          33755,
          34018
        ],
        "name": "TradePair",
        "nameLocation": "278:9:40",
        "scope": 33756,
        "usedErrors": []
      }
    ],
    "license": "UNLICENSED"
  },
  "id": 40
}